import{s as x}from"./D4txdwTa.js";import{t as L}from"./Dmt1cPZn.js";import{S as I}from"./BJsWKcEX.js";import{a as U,v as k}from"./BCGqgtjN.js";import{d as B,r as M,c as v,a as o,b as u,u as m,l as c,m as F,y as E,t as p,e as P,q as $,k as w,L as A}from"./8xvvzpeQ.js";const j=["innerHTML"],R=["for"],H={key:0},z={class:"flex-col"},D={key:2,id:"error-container",class:"error"},X=B({__name:"OptionElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formLabelAlignment:{type:String},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","handleFieldLogicChange"],setup(t,{expose:S,emit:T}){const e=t,b=M(),O=T,f=v(()=>e.kind=="survey"),h=v(()=>e.errors[e.item.tag]),g=v(()=>e.item.type==="single_options"),y=v(()=>e.item.type==="multiple_options"),q=(l,i)=>{b.value=l,f.value&&g.value&&O("handleFieldLogicChange",{...i,selectedOption:l}),V()},C=()=>{V()},V=()=>{var a,r,s,d;const l=b.value||e.formFieldsValue[(a=e.item)==null?void 0:a.tag];let i;g.value?i=L(l):y.value&&(i=!((d=(s=e.formFieldsValue)==null?void 0:s[(r=e.item)==null?void 0:r.tag])!=null&&d.length)),e.item.required&&i?n(e.item.tag,`${e.item.label} is required`):n(e.item.tag,null),e.item.dataType==="MULTIPLE_OPTIONS"&&k(e.formFieldsValue[e.item.tag],e.item.picklistOptions)&&n(e.item.tag,`${e.item.label} contains invalid value`)},N=()=>{var a,r,s,d;if(f.value)return;const l=b.value||e.formFieldsValue[(a=e.item)==null?void 0:a.tag];let i;g.value?i=L(l):y.value&&(i=!((d=(s=e.formFieldsValue)==null?void 0:s[(r=e.item)==null?void 0:r.tag])!=null&&d.length)),e.item.required&&i?n(e.item.tag,`${e.item.label} is required`):n(e.item.tag,null),e.item.dataType==="SINGLE_OPTIONS"&&e.formFieldsValue[e.item.tag]&&!e.item.picklistOptions.includes(e.formFieldsValue[e.item.tag])&&n(e.item.tag,`${e.item.label} having invalid value`),e.item.dataType==="MULTIPLE_OPTIONS"&&k(e.formFieldsValue[e.item.tag],e.item.picklistOptions)&&n(e.item.tag,`${e.item.label} contains invalid value`)},n=(l,i)=>{O("addOrUpdateError",{tag:l,error:i})};return S({validate:N,item:e.item}),(l,i)=>(o(),u("div",{class:F(["form-builder--item field-container",{"d-none":t.item.hidden,"form-builder--item-input":m(f)}])},[m(f)&&t.item.description!==void 0?(o(),u("label",{key:0,innerHTML:t.item.description,class:"item-description"},null,8,j)):c("",!0),t.formLabelVisible?(o(),u("label",{key:1,class:F([m(U)(t.item.labelAlignment,t.formLabelAlignment),"field-label"]),for:t.item.tag},[E(p(t.item.label)+" ",1),t.item.required?(o(),u("span",H,"*")):c("",!0)],10,R)):c("",!0),P("div",z,[$(m(x),{modelValue:t.formFieldsValue[t.item.tag],"onUpdate:modelValue":i[0]||(i[0]=a=>t.formFieldsValue[t.item.tag]=a),placeholder:!t.formLabelVisible&&t.item.required?t.item.placeholder+"*":t.item.placeholder,name:t.item.tag,options:t.item.picklistOptions,allowEmpty:!m(g),multiple:!!m(y),"show-labels":!1,closeOnSelect:!0,class:"multi_select_form",id:t.item.tag,onSelect:i[1]||(i[1]=a=>{q(a,t.item)}),onRemove:C},null,8,["modelValue","placeholder","name","options","allowEmpty","multiple","id"]),t.item.shortLabel?(o(),w(I,{key:0},{default:A(()=>[E(p(t.item.shortLabel),1)]),_:1})):c("",!0)]),m(h)?(o(),u("div",D,p(m(h)),1)):c("",!0)],2))}});export{X as _};
