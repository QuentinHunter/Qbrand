const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TextElement.CqrgXvy-.css","./TextBoxListElement.BbmoZcvv.css","./EmailElement.jE_nGMsg.css","./HeadingElement.m-g7VC6o.css","./TextAreaElement.DhlTBZzY.css","./CaptchaElement.CwYCMG1O.css","./RatingElement.DVwNReYk.css","./CheckBoxElement.BEYyUWrc.css","./TermsAndConditionsElement.PhO3da8y.css","./RadioOptionElement.KosgWzkk.css","./vue-multiselect.B5exX717.css","./OptionElement.CkzrrImk.css","./DatePick.CTXhwUy6.css","./DateElement.BEDGGAmD.css","./FileUploadElement.xXB1GlMw.css","./SignatureElement.C0yiJuTC.css","./FormSurveyAddressElement.EX39aLc-.css","./ghl-payment-element.Dad5BXrt.css","./FormSurveyPayment.CO8FvRVm.css","./FooterSwitcher.BAbjdDyx.css","./OrderConfirmation.CERRXu7O.css","./ThanksMessage.CoXZSv2P.css"])))=>i.map(i=>d[i]);
import{I as Fl,aM as Dl,d as Ai,f as $o,r as m,T as Vi,aw as ki,ax as Ei,c as fe,g as Ti,D as Pi,A as So,o as il,n as He,v as nl,ay as ut,a as x,b as Ie,e as Ce,q as dt,u as t,m as yo,s as ro,l as be,a8 as Ci,F as sl,p as ul,k as $,az as te,t as dl,aA as xi,Z as wi,aT as Oi,au as wt,bw as fl,J as Fo,aE as Li,aF as qi,aH as Bi,h as Ot,aJ as jo,i as Lt,aD as Ri,w as j,x as H,aB as cl,bn as Ni,_ as Ui}from"./8xvvzpeQ.js";import{S as Mi}from"./BPJmMdw_.js";import{i as Ho,v as zi,n as ml,e as po,_ as Ji,g as $i,f as ji}from"./BCGqgtjN.js";import{w as Hi}from"./TNK_wdwi.js";/* empty css        */import{_ as Qi}from"./BrQJU4K_.js";import{i as vl,b as ft,f as yl,g as Ki,d as Wi,a as Yi,A as Gi,s as Zi,e as qt,P as pl}from"./oo_a1T_D.js";import{i as Xi,f as en}from"./WnAHhi8M.js";import{c as on,u as tn,e as Bt,f as Rt,h as rn,j as gl,k as an,z as ln,t as hl,y as nn,q as sn,w as un,C as dn}from"./Dmt1cPZn.js";import{F as Be,g as _l,a as fn,b as cn}from"./64lVuDft.js";import{a as mn}from"./DW-3PSLe.js";import{l as vn,g as yn,G as pn}from"./s9d8JekZ.js";import{u as gn}from"./DII_iCb6.js";import{u as bl}from"./DCID7Uvk.js";import{d as hn}from"./nYEoF91a.js";import{c as Do}from"./BcalUQVR.js";const{addHeaderFromCookieForReferer:_n}=Dl(),bn=()=>{var ao,Ke;const s={channel:"APP",source:"WEB_USER",version:"2021-04-15"},Qe=(Ke=(ao=Intl==null?void 0:Intl.DateTimeFormat())==null?void 0:ao.resolvedOptions())==null?void 0:Ke.timeZone;return Qe&&(s.timezone=Qe),_n(s),s},Nt=s=>{const Qe=Fl();return $fetch.create({baseURL:Qe.public.REST_API_URLS,headers:{"x-parent-trace-context":"",...bn()}})},Sn={patchSubmission:s=>Nt()("/surveys/submission",{body:s,method:"PATCH"}),fireFormSurveyEvent:s=>Nt()("/form/form-survey-event",{body:s,method:"POST"}),submitSurvey:s=>Nt()("/surveys/submit",s)},Sl=(s,Qe,ao,Ke)=>{try{let We=Object.keys(s.errors).filter(le=>s.errors[le]);if(We.length===0&&s.validationError.captcha&&(We=["captcha"]),We.length===0)return;const ye=We[0];if(ye==="captcha"){const le=document.querySelector("[data-sitekey]")||document.querySelector(".g-recaptcha")||document.querySelector('[id*="captcha"]')||document.querySelector(".recaptcha-container");le&&le.scrollIntoView({behavior:"smooth",block:"start"});return}if(ye==="address"||ye==="group_address"||ye==="city"||ye==="state"||ye==="postal_code"||ye==="country"){const le=document.querySelector(".address-wrapper")||document.querySelector('[data-field-name="address"]')||document.querySelector('input[placeholder*="address" i]')||document.querySelector('input[placeholder*="search" i]');if(le){le.scrollIntoView({behavior:"smooth",block:"start"});const Qo=le.querySelector("input, textarea, select");Qo&&setTimeout(()=>{Qo.focus()},500)}return}const Ye=Qe[ao];let Io=-1;Ye&&Ye.slideData&&(Io=Ye.slideData.findIndex(le=>le.tag===ye));let Fe=null;if(Io!==-1){const le=`el_${Ke}_${ye}_${Io}`;Fe=document.getElementById(le)}if(!Fe){const le=document.querySelectorAll(`[id^="el_${Ke}_${ye}_"]`);le.length>0&&(Fe=le[0])}if(Fe||(Fe=document.getElementById(ye)||document.querySelector(`[name="${ye}"]`)||document.querySelector(`[data-q="${ye}"]`)||document.querySelector(`[data-field-tag="${ye}"]`)),Fe){Fe.scrollIntoView({behavior:"smooth",block:"start"});const le=Fe.querySelector("input, textarea, select");le&&setTimeout(()=>{le.focus()},500)}}catch(We){console.error("scrollToFirstErrorField error:",We)}},Fn=j(()=>H(()=>import("./gspkBITe.js"),[],import.meta.url).then(s=>s.default||s)),Dn=j(()=>H(()=>import("./DN1vNbCO.js"),__vite__mapDeps([0]),import.meta.url).then(s=>s.default||s)),In=j(()=>H(()=>import("./f-w9390m.js"),__vite__mapDeps([0]),import.meta.url).then(s=>s.default||s)),An=j(()=>H(()=>import("./BII-BBHI.js"),__vite__mapDeps([1]),import.meta.url).then(s=>s.default||s)),Vn=j(()=>H(()=>import("./DBnOGnli.js"),__vite__mapDeps([2]),import.meta.url).then(s=>s.default||s)),kn=j(()=>H(()=>import("./BKlzrVD3.js"),__vite__mapDeps([3]),import.meta.url).then(s=>s.default||s)),En=j(()=>H(()=>import("./Cs3klZ0w.js"),__vite__mapDeps([1]),import.meta.url).then(s=>s.default||s)),Tn=j(()=>H(()=>import("./DJ6Rwrbm.js"),__vite__mapDeps([4]),import.meta.url).then(s=>s.default||s)),Pn=j(()=>H(()=>import("./DNAPAI4s.js"),[],import.meta.url).then(s=>s.default||s)),Cn=j(()=>H(()=>import("./BBLHkdqM.js"),__vite__mapDeps([5]),import.meta.url).then(s=>s.default||s)),xn=j(()=>H(()=>import("./D0vZKkIG.js"),__vite__mapDeps([1]),import.meta.url).then(s=>s.default||s)),wn=j(()=>H(()=>import("./DZ_-ue_p.js"),__vite__mapDeps([6]),import.meta.url).then(s=>s.default||s)),On=j(()=>H(()=>import("./BcbRMslp.js"),__vite__mapDeps([7]),import.meta.url).then(s=>s.default||s)),Ln=j(()=>H(()=>import("./Dft1FZUV.js"),__vite__mapDeps([8]),import.meta.url).then(s=>s.default||s)),qn=j(()=>H(()=>import("./BynPnKa2.js"),__vite__mapDeps([9]),import.meta.url).then(s=>s.default||s)),Bn=j(()=>H(()=>import("./xyGoWrr2.js"),__vite__mapDeps([1]),import.meta.url).then(s=>s.default||s)),Rn=j(()=>H(()=>import("./1ucATXd9.js"),__vite__mapDeps([10]),import.meta.url).then(s=>s.default||s)),Nn=j(()=>H(()=>import("./DKafFMly.js"),__vite__mapDeps([11,10]),import.meta.url).then(s=>s.default||s)),Un=j(()=>H(()=>import("./Cpejf19C.js"),__vite__mapDeps([12,13]),import.meta.url).then(s=>s.default||s)),Mn=j(()=>H(()=>import("./D6nCrx5z.js"),__vite__mapDeps([14]),import.meta.url).then(s=>s.default||s)),zn=j(()=>H(()=>import("./oJp2h3Pv.js"),__vite__mapDeps([15]),import.meta.url).then(s=>s.default||s)),Jn=j(()=>H(()=>import("./D-EyuI2V.js"),__vite__mapDeps([0,16]),import.meta.url).then(s=>s.default||s)),$n=j(()=>H(()=>import("./CQlZlZhx.js"),__vite__mapDeps([17,18,10]),import.meta.url).then(s=>s.default||s)),jn=j(()=>H(()=>import("./DleH2ADF.js"),[],import.meta.url).then(s=>s.default||s)),Hn=j(()=>H(()=>import("./BmDW8KYK.js"),[],import.meta.url).then(s=>s.default||s)),Qn=j(()=>H(()=>import("./Bc6f6HXW.js"),__vite__mapDeps([19]),import.meta.url).then(s=>s.default||s)),Kn=j(()=>H(()=>import("./DUfTI8SO.js"),__vite__mapDeps([20]),import.meta.url).then(s=>s.default||s)),Wn=j(()=>H(()=>import("./COKQhOVB.js"),__vite__mapDeps([21]),import.meta.url).then(s=>s.default||s)),Yn={id:"app",ref:"app",class:"ghl-body"},Gn={class:"d-flex"},Zn={id:"form-builder",class:"hl_wrapper--inner form-builder"},Xn={class:"loader-container"},es=["id"],os={key:1,class:"header-image-container"},ts=["id","onClick","onFocus","onFocusin"],rs={key:23,class:"field-divider"},as={key:1,class:"recaptcha-container recaptch-top-margin"},ls={key:0},is={id:"error-container",class:"error"},ns=["innerHTML"],ss=Ai({__name:"surveyComponent",props:{surveyData:{type:Object,required:!0},id:{type:String,required:!0},redirect:{type:Boolean,default:!0},source:{type:String,default:""},funnelPreview:{type:Boolean,default:!1},surveyElementClass:{type:String,required:!1},pageUrl:{type:String,default:void 0},baseReferrrer:{type:String,default:void 0},urlParams:{type:Object,default:void 0},stickyContactData:{type:Object,default:void 0},stickyContactFingerprint:{type:String,default:void 0},extra:{type:Object,default:void 0}},emits:["on-submit"],async setup(s,{emit:Qe}){var Fr,Dr,Ir,Ar,st,Vr;let ao,Ke;const{redirectAction:We}=gn();$o.extend(on);const{addHeaderFromCookieForReferer:ye}=Dl(),{getSurveyStyle:Ye,setFormStyle:Io,getFormWidth:Fe,hasCustomMarginTop:le,getMarginStyle:Qo}=tn(),Se=m([0]),Ut=m(!0),Ge=Vi(),ct=Fl(),Il={},Al={},Vl={},kl={},El=m(!0),Tl={},S=m([]),Ze=m([]),Pl={},ce=m(ki()||Ei()),Cl={},Ko=m(""),mt=m(""),ae=m(!0),xl={},Mt=m(!1),wl={},De=m(!1),Re=m({}),he=m(""),vt=m(!1),zt=m(!1),Jt=m(!1),yt=m(),_e=m(""),me=m(!1),pt=m("US"),Wo=m(),Ao=m(""),Xe=m(""),Yo=m(""),q=m(0),Ne=m(!1),Le=m(!0),lo=m(0),gt=m(!1),$t=m("slide_question"),pe=m(1),xe=m(!0),eo=m(!1),ie=m([]),Vo=m(!1),jt=m(""),go=m(""),Go=m(!1),Ol=m([]),Ht=m(!1),ko=m(!1),Ll={},Qt=m(0),Eo=m([]),Ue=m("");m("");const se=m();let Me=m();const Zo=m(!1),ql=m(),Bl={};let Rl={};const Xo=m({}),oo=m({}),Nl=fe(()=>Qo()),To=m([]),X=m([]),ho=m(),et=m();m();const io=m(),Ae=m(),ze=m(!1),Kt=m(!1),Po=m(),Wt=m(null),ot=m(!1),e=Ti({phoneCountryIncluded:Al,phoneCountryCode:Vl,formattedPhone:Il,isPhoneValidObj:kl,formSurvey:Tl,formStyle:Pl,fieldStyle:Rl,buttonStyle:Cl,company:xl,formFieldsValue:wl,multiStoreSkipLogic:Ll,validationError:Bl,lastJumpTarget:null,lastJumpTime:0,jumpSourceSlide:null,isJumpActive:!1,preventJumpAfterBack:!1,userInitiatedBack:!1,pendingJumpIndex:null,errors:{}}),Yt=m(),Ve=Pi(),ht=m(0),Gt=m(Date.now()),Zt=m(!1),Xt=m({}),_t=m(),Ul=m(),tt=m(),Co=m(),xo=m(),ke=m({paymentType:Be.DONATION,orderId:void 0}),wo=m(!1),bt=m([]),er=m({}),or=m(),Oo=m({}),rt=m([]),tr=m(!1),St=m(!1),Lo=m(),no=m(),Ft=m(!1),qo=m(),at=m(""),so=m(null),_o=m({}),Bo=m([]),rr=m([]),Ee=m(null),ar=m({}),Ml=Qe;m();const v=s,zl=fe(()=>v.surveyData.formData.form.payment.liveModeOn?ct.public.STRIPE_DEFAULT_CONFIGURATION_LIVE_SURVEY:ct.public.STRIPE_DEFAULT_CONFIGURATION_TEST_SURVEY);bl({link:[{rel:"stylesheet",href:"https://stcdn.leadconnectorhq.com/intl-tel-input/17.0.12/css/intlTelInput.min.css"}],script:[{src:"https://stcdn.leadconnectorhq.com/libphonenumber/1.10.60/libphonenumber-js.min.js",async:!0,type:"text/javascript"},{src:"https://stcdn.leadconnectorhq.com/intl-tel-input/17.0.12/js/utils.min.js",async:!0,type:"text/javascript"},{src:"https://stcdn.leadconnectorhq.com/intl-tel-input/intlTelInput.min.js",async:!0,type:"text/javascript"}]});const lr=()=>{qo.value=void 0,Ft.value=!1},Jl=o=>{if(!o){at.value="Verification failed! Please try again";return}at.value="",qo.value=o},$l=o=>{var r,a,l,i;xo.value=o,e.formFieldsValue.payment=((i=(l=(a=(r=e.formSurvey)==null?void 0:r.formData)==null?void 0:a.form)==null?void 0:l.payment)==null?void 0:i.currency.symbol)+o},jl=async o=>{var r,a,l,i,n,f;if(o.type==="error")o.message&&(e.formSurvey.formData.form.payment.required||xo.value||wo.value)&&(me.value=!1);else if(o.type==="pre_process")v.funnelPreview&&Oi(Ge.value.funnelId,{products:[],tax:[],total:0},"v2");else if(o.type==="success"){if(v.funnelPreview&&wt("pmc_id",zl.value),Oo.value={orderId:ke.value.orderId,paymentType:((r=ke.value)==null?void 0:r.paymentType)===Be.PRODUCT?Be.PRODUCT:Be.DONATION,transactionId:["authorize-net","nmi","square"].includes(o.provider)?(a=o.data)==null?void 0:a.transactionId:(l=o.data.data)==null?void 0:l.transactionId},Co.value){const F={submissionId:Co.value,orderId:ke.value.orderId,paymentType:((i=ke.value)==null?void 0:i.paymentType)===Be.PRODUCT?Be.PRODUCT:Be.DONATION,locationId:_e.value,surveyId:v.id,transactionId:["authorize-net","nmi","square"].includes(o.provider)?(n=o.data)==null?void 0:n.transactionId:(f=o.data.data)==null?void 0:f.transactionId};await Hl(F,o)}else await lt(tt.value,!0,o),vr(Lo.value,no.value);St.value=!0}},Hl=async(o,r)=>{try{await Sn.patchSubmission(o),await lt(tt.value,!0,r)}catch(a){console.error(a),await lt(tt.value,!0,r)}},ir=o=>{Wo.value=o},Ql=o=>{vt.value=o},Ro=o=>{const{tag:r,value:a}=o;e.formFieldsValue[r]=a;const l=Do(S.value);Te(e.formFieldsValue,!0);let i=!1;S.value.forEach((n,f)=>{n.slideData&&n.slideData.forEach(F=>{const p=l[f];if(!(p!=null&&p.slideData))return;const h=p.slideData.find(I=>I.hiddenFieldQueryKey===F.hiddenFieldQueryKey);h&&h.hidden!==F.hidden&&(i=!0)})}),i&&Ct(e.formFieldsValue,0)},ue=o=>{const{tag:r,error:a}=o;e.errors[r]=a};m({});const nr=o=>{se.value=o;const r={...e.formFieldsValue,country:o};Te(r,!0)},Kl=o=>{yt.value=o},Wl=o=>{zt.value=!0,e.formFieldsValue.emailVerified=o},sr=o=>{Jt.value=!0,e.formFieldsValue.phoneVerified=o},Dt=o=>{Array.isArray(e.formFieldsValue.tokens)||(e.formFieldsValue.tokens=[]),e.formFieldsValue.tokens.push(o)},Yl=()=>{he.value&&ho.value&&window.parent.postMessage(["highlevel.setHeight",{height:ho.value.clientHeight,id:he.value}],"*")},No=o=>{const r=e.phoneCountryIncluded[o.tag],a=e.phoneCountryCode[o.tag];e.formFieldsValue[o.tag]=r;try{const l=window.libphonenumber.parsePhoneNumberFromString(r,a);e.isPhoneValidObj[o.tag]=!!l.isValid(),e.phoneCountryIncluded[o.tag]=l.isValid()?l.number:r,e.phoneCountryCode[o.tag]=l.country?l.country:a,e.formattedPhone[o.tag]=l.isValid()?l.formatNational():r}catch{e.isPhoneValidObj[o.tag]=!1,e.phoneCountryIncluded[o.tag]=r,e.phoneCountryCode[o.tag]=a,e.formattedPhone[o.tag]=r}o.tag==="phone"&&(Ao.value=e.formFieldsValue[o.tag],e.formFieldsValue[o.tag]===void 0&&(e.formFieldsValue[o.tag]=null))},ur=()=>{S.value.forEach((o,r)=>{o.slideData.filter((a,l)=>{if(a.type==="textbox_list"){const n={...e.formFieldsValue[a.tag]||{}};a.picklistOptions.forEach(f=>{n[f.id]===void 0&&(n[f.id]=f.prefillValue)}),e.formFieldsValue[a.tag]=n}else a.type==="source"&&(e.formFieldsValue[a.tag]=a.value||"")})})},Gl=o=>o?"@import url('https://fonts.bunny.net/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');":"@import url('https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');",Zl=()=>$i(e.formSurvey.formData.form.fieldStyle.labelWidth),dr=m(""),Xl=o=>({marginBottom:ei(o)}),ei=o=>{var r,a,l,i;return o.hidden?0:(i=(l=(a=(r=e.formSurvey)==null?void 0:r.formData)==null?void 0:a.form)==null?void 0:l.style)!=null&&i.hasOwnProperty("fieldSpacing")?e.formSurvey.formData.form.style.fieldSpacing+"px":"16px"},oi=o=>{if(!o||!Array.isArray(o))return[];if(!o.some(n=>n.tag==="group_address"))return o.filter(n=>!Ho(o,n)||Ho(o,n)&&n.hidden===!1);const a=o.filter(n=>fl.includes(n.tag)),l=o.find(n=>n.tag==="group_address");if(a.some(n=>n.hidden===!1)&&l){const n={...l,hidden:!1,required:l.required||a.some(f=>f.required)};return o.filter(f=>!fl.includes(f.tag)&&(f.tag==="group_address"||!Ho(o,f)||f.hidden===!1)).map(f=>f.tag==="group_address"?n:f)}return o.filter(n=>!Ho(o,n)||Ho(o,n)&&n.hidden===!1)},fr=o=>{const{footerStyle:r,mobileFooterStyle:a}=sn(o,Ye);Xo.value=r,oo.value=a},ti=async()=>{var o,r,a,l,i,n,f,F,p,h,I,N,z,W,oe,re,J,G,c,u,L,U,B,D,ee,ve,Pe,qe,$e,to,fo,co,Q,C,Z,g,w,de,ge,_,y,k,ne,V,O,T,E;if(v.surveyData){const{country:P,formData:d,locationId:R}=Object.assign({},v.surveyData);if(pt.value=P,he.value=v.id,e.formSurvey=v.surveyData,d.form===void 0)return!1;Vo.value="stickyContact"in d.form?d.form.stickyContact:!1,Yo.value=d.form.fbPixelId,_e.value=R;const Y=v.surveyElementClass?`.${v.surveyElementClass}${cl}`:cl;if((l=(a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)==null?void 0:a.fieldStyle)!=null&&l.labelAlignment&&(dr.value=Zl()),"style"in d.form){const b=d.form.style;Io({...b,padding:ce.value&&b.mobilePadding||b.padding,margin:ce.value?((n=(i=d.form)==null?void 0:i.style)==null?void 0:n.mobileMargin)||((F=(f=d.form)==null?void 0:f.style)==null?void 0:F.margin):(h=(p=d.form)==null?void 0:p.style)==null?void 0:h.margin},d.form.width),Po.value=ce.value&&v.surveyData.formData.mobileFieldCSS||v.surveyData.formData.fieldCSS,Po.value&&!vl()&&v.surveyElementClass&&(Po.value=Po.value.replace(/\.form\-field\-wrapper\s/g,`.${v.surveyElementClass} .form-field-wrapper `)),Mt.value=b.ac_branding??b.acBranding,Yt.value=Gl(d.form.isGDPRCompliant);const M=ce.value?b.mobileBgImage:b.bgImage;M&&(jt.value=`${v.funnelPreview?`.${v.surveyElementClass} #form-builder`:"body"} {background-image: url('${M}');background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: top center}`)}if("fieldStyle"in d.form){const b=d.form.fieldStyle;e.fieldStyle={bgColor:b.bgColor,labelColor:b.labelColor,labelFontFamily:b.labelFontFamily,placeholderColor:b.placeholderColor,border:b.border,width:b.width,padding:b.padding,shadow:b.shadow}}if(fr(d.form),"button"in d.form){const b=d.form.button;e.buttonStyle={bgColor:b==null?void 0:b.background,color:b==null?void 0:b.color,border:((I=b==null?void 0:b.border)==null?void 0:I.border)||0,borderColor:((N=b==null?void 0:b.border)==null?void 0:N.color)||Ni,radius:(z=b==null?void 0:b.border)==null?void 0:z.radius,padding:(W=b==null?void 0:b.border)==null?void 0:W.padding}}if("customStyle"in d.form&&d.form.customStyle.length>0&&(Ko.value=d.form.customStyle.replace(".form-element","")),(re=(oe=d==null?void 0:d.form)==null?void 0:oe.style)!=null&&re.color&&(mt.value=`${Y}label{color:#${(G=(J=d==null?void 0:d.form)==null?void 0:J.style)==null?void 0:G.color};}`),(u=(c=d==null?void 0:d.form)==null?void 0:c.fieldStyle)!=null&&u.labelColor&&(mt.value=`${Y}label{color:#${d.form.fieldStyle.labelColor};}`),"company"in d.form&&(e.company=d.form.company),"formLabelVisible"in d.form&&(ae.value=d.form.formLabelVisible),"formAction"in d.form&&(gt.value=d.form.formAction.fieldSettingEnable,Ee.value={actionType:d.form.formAction.actionType,thankyouText:d.form.formAction.thankyouText,redirectUrl:d.form.formAction.redirectUrl,redirect_url:d.form.formAction.redirect_url,endsurveyType:d.form.formAction.endsurveyType,endsurveyText:d.form.formAction.endsurveyText,endsurveyUrl:d.form.formAction.endsurveyUrl},"headerImageSrc"in d.form.formAction&&((U=(L=d.form.formAction.headerImageSrc)==null?void 0:L.trim())==null?void 0:U.length)>0&&(go.value=d.form.formAction.headerImageSrc),ce.value&&"mobileHeaderImageSrc"in d.form.formAction&&((D=(B=d.form.formAction.mobileHeaderImageSrc)==null?void 0:B.trim())==null?void 0:D.length)>0&&(go.value=d.form.formAction.mobileHeaderImageSrc),"headerFullWidthEnable"in d.form.formAction&&(Go.value=d.form.formAction.headerFullWidthEnable)),"surveyLogicLinkById"in v.surveyData.formData&&(Ht.value=v.surveyData.formData.surveyLogicLinkById),"newFooter"in v.surveyData.formData&&(ko.value=v.surveyData.formData.newFooter),"enablePartialContactCreation"in v.surveyData.formData&&(ot.value=(ee=v.surveyData.formData)==null?void 0:ee.enablePartialContactCreation),ko.value&&(Ko.value=Ko.value.split(`
`).map(b=>b.includes("footer")?b.replace(/#_builder-form/g,""):b).join(`
`)),(ve=d.form)!=null&&ve.address&&(Me.value=(Pe=d.form)==null?void 0:Pe.address),"slides"in v.surveyData.formData){if(S.value=[],Ze.value=[],bo.value){let b=[];b=v.surveyData.formData.slides;const M=[];b.forEach((K,mo)=>{M.push({active:K.active,button:K.button,logic:"logic"in K?K.logic:{},slideName:K.slideName,id:K.id,slideData:[]}),K.slideData.forEach(function(vo,je){Ze.value.push(vo),M[mo].slideData.push(vo)})}),S.value=M.filter(function(K){return K.slideData.length>0}),$t.value="slide_question",pe.value=S.value.length}else{const b=v.surveyData.formData.slides[0],M=[];b.slideData.length>0&&(M.push({active:b.active,button:b.button,logic:"logic"in b?b.logic:{},slideName:b.slideName,slideData:[]}),b.slideData.map(K=>{const mo=M.length-1,vo=M[mo].slideData.find(je=>je.type!=="img"&&je.type!=="h1"&&je.type!=="html");if(Ze.value.push(K),vo===void 0)M[mo].slideData.push(K);else{M.push({active:b.active,button:b.button,logic:"logic"in b?b.logic:{},slideName:b.slideName,slideData:[]});const je=M.length-1;M[je].slideData.push(K)}})),S.value=M,$t.value="slide_question",pe.value=M.length}pe.value===1&&(Le.value=!1)}((fo=(to=($e=(qe=e.formSurvey)==null?void 0:qe.formData)==null?void 0:$e.form)==null?void 0:to.payment)==null?void 0:fo.paymentType)==="product"&&((C=(Q=(co=e.formSurvey)==null?void 0:co.formData)==null?void 0:Q.form.payment)==null?void 0:C.products.length)>0&&await ri(),((de=(w=(g=(Z=e.formSurvey)==null?void 0:Z.formData)==null?void 0:g.form)==null?void 0:w.payment)==null?void 0:de.paymentType)==="donation"&&((ne=(k=(y=(_=(ge=e.formSurvey)==null?void 0:ge.formData)==null?void 0:_.form)==null?void 0:y.payment)==null?void 0:k.recurringDonation)!=null&&ne.isRecurringDonationEnabled)&&((O=(V=e.formSurvey)==null?void 0:V.formData)!=null&&O.recurringProductId)&&(ar.value=await cn((E=(T=e.formSurvey)==null?void 0:T.formData)==null?void 0:E.recurringProductId,_e.value)),El.value=!1}},ri=async()=>{var a,l,i,n,f,F,p,h,I,N,z,W,oe,re;const o=(i=(l=(a=e.formSurvey)==null?void 0:a.formData)==null?void 0:l.form)==null?void 0:i.payment.products.map(J=>J.productId),r=await pl.getPublicProducts({locationId:v.surveyData.locationId,productIds:o,includeNonStoreProducts:!0});if(tr.value=!0,rt.value=(F=(f=(n=e.formSurvey)==null?void 0:n.formData)==null?void 0:f.form)==null?void 0:F.payment.products.map(J=>{let G={};return r.products.forEach(c=>{J.productId===c._id&&(G=c)}),G={...G,...J,quantity:1},G}).filter(J=>J._id!==void 0),(z=(N=(I=(h=(p=e.formSurvey)==null?void 0:p.formData)==null?void 0:h.form)==null?void 0:I.payment)==null?void 0:N.bumpSettings)!=null&&z.enableBump){const J=(re=(oe=(W=e.formSurvey)==null?void 0:W.formData)==null?void 0:oe.form)==null?void 0:re.payment.bumpProducts.map(c=>c.priceId),G=await pl.getSelectedProductPrices({locationId:v.surveyData.locationId,ids:J==null?void 0:J.join(",")});rr.value=G}},ai=()=>{var a;const o=Ye().borderRadius,r=ce.value&&((a=oo.value)==null?void 0:a.enableProgressBar)&&pe.value>1;return Jo.value?{...Ye(),borderRadius:r?"0 0 0 0":`${o} ${o} 0 0`,boxShadow:0,marginBottom:0}:{...Ye(),borderRadius:r?`0 0 ${o} ${o}`:o}},li=()=>{var o,r,a,l,i;return{backgroundColor:((i=(l=(a=(r=(o=oo.value)==null?void 0:o.computedStyles)==null?void 0:r.styles)==null?void 0:a.progressBar)==null?void 0:l.barStyle)==null?void 0:i.backgroundColor)||"#E5E7EB"}},ii=()=>{var o,r,a,l,i;return{width:`${lo.value}%`,backgroundColor:((i=(l=(a=(r=(o=oo.value)==null?void 0:o.computedStyles)==null?void 0:r.styles)==null?void 0:a.progressBar)==null?void 0:l.fillStyle)==null?void 0:i.backgroundColor)||"#3B82F6"}},ni=o=>{const{item:r,index:a,checkVal:l,isChecked:i}=o,n=[];if(i)Eo.value.push(a),Array.isArray(e.formFieldsValue[r.tag])?e.formFieldsValue[r.tag].push(l):(n.push(l),e.formFieldsValue[r.tag]=n);else{let f=e.formFieldsValue[r.tag].indexOf(l);e.formFieldsValue[r.tag].splice(f,1),f=Eo.value.indexOf(a),Eo.value.splice(f,1)}Qt.value=Math.max(...Eo.value),Mo(r)},Uo=async o=>{var c,u,L,U,B;if(me.value)return;for(let D in e.phoneCountryIncluded)e.phoneCountryIncluded[D]&&No({tag:D});if(await rn(e.formFieldsValue)>50*1024*1024){alert("The total size of the attached files cannot be more that 50MB");return}const a=Fo("msgsndr_id").value;if(e.errors={},o!==void 0&&o){let D=!0;if(D=await cr(q.value),!D)return Sl(e,S.value,q.value,he.value),!1}Ne.value=!1;const l=await gl(e.formFieldsValue,se.value);e.formFieldsValue=l.formFieldsValue;const i=await an(Ve,Ze.value,e.formFieldsValue);if(e.formFieldsValue=i.formFieldsValue,me.value=!0,e.formFieldsValue.formId=he.value,e.formFieldsValue.location_id=_e.value,Ao.value&&(e.formFieldsValue.phone=Ao.value),e.formFieldsValue.disqualified=ie.value.length>0,Vo.value){let D;if(v.stickyContactFingerprint&&(D=v.stickyContactFingerprint),!D&&typeof Storage<"u")try{D=localStorage.getItem("location_"+_e.value)}catch{}D?e.formFieldsValue.contact_id=D:D=Fo(_e.value).value||a}const n=Ve.query.contact_id||((c=v.urlParams)==null?void 0:c.contact_id);ot.value&&q.value!==pe.value-1?(e.formFieldsValue.query_contact_id=Wt.value,e.formFieldsValue.updateContactOnly=!0,me.value=!0,Le.value=!1):(delete e.formFieldsValue.query_contact_id,e.formFieldsValue.updateContactOnly=!1),n&&(e.formFieldsValue.query_contact_id=n);const f=Ki(e.formSurvey.locationId);f&&(e.formFieldsValue.sessionId=f);const F=Wi();e.formFieldsValue.eventData={...Yi(v.pageUrl,v.baseReferrrer),fbEventId:F};const p=ft(e.formSurvey.locationId);p&&(e.formFieldsValue.sessionFingerprint=p),yt.value&&(e.formFieldsValue.captchaToken=yt.value);var h=new FormData;let I={};if(Object.keys(e.formFieldsValue).forEach(async D=>{var ee;if(e.formFieldsValue[D]instanceof File)h.append(D,e.formFieldsValue[D]);else if((ee=e.formFieldsValue[D])!=null&&ee.files){const ve=Object.values(e.formFieldsValue[D].files);ve.length&&await Promise.all(ve.map(Pe=>{h.append(D,Pe)}))}else(e.formFieldsValue[D]||e.formFieldsValue[D]===0)&&(I[D]=e.formFieldsValue[D])}),v.funnelPreview){let{domain:D,page_url:ee}=Ve.query;D||(D=window.location.hostname,ee=window.location.pathname),I.funneEventData={event_type:"optin",domain_name:D,page_url:ee,funnel_id:Ge.value.funnelId,page_id:Ge.value.funnelPageId,funnel_step_id:Ge.value.stepId}}I.eventData.medium=Gi.Survey,I.eventData.mediumId=I==null?void 0:I.formId;const z=Fo("am_id").value,W=Fo("am_fingerprint").value;z&&(I.amId=z),W&&(I.amFingerprint=W),e.formSurvey.formData.form.enableTimezone!==!1&&(I.Timezone=`${Li()} ${qi()}`),Co.value&&(I.submissionId=Co.value),Xt.value&&(I.paymentContactId=Xt.value),(xo.value||wo.value)&&(I.paymentStatus="Pending"),Ve.query.notrack||(I.timeSpent=(new Date().getTime()-ht.value)/1e3),Oo.value&&(I.orderId=Oo.value.orderId,I.transactionId=Oo.value.transactionId,I.paymentType=Oo.value.paymentType),(L=(u=S.value)==null?void 0:u.find(D=>D.hiddenFieldQueryKey==="payment"))!=null&&L.hidden&&(delete I.payment,delete I.paymentStatus,delete I.paymentContactId),h.set("formData",JSON.stringify(I)),h.append("locationId",_e.value),h.append("surveyId",he.value),qo.value&&h.append("captchaToken",qo.value),h.append("captchaV3",await yn(pn.LEADGEN_SURVEY_SUBMIT));const oe={},re=(B=(U=Intl==null?void 0:Intl.DateTimeFormat())==null?void 0:U.resolvedOptions())==null?void 0:B.timeZone;re&&(oe.timezone=re),ye(oe);const J={method:"POST",body:h,headers:oe},G=ct.public.REST_API_URLS;try{Te({...e.formFieldsValue,...I});const D=await $fetch(G+`/surveys/submit?surveyId=${he.value}&locationId=${_e.value}`,J);if(D.status)if(lr(),Co.value=D.submissionId,tt.value=D,gr.value){const ee=await _t.value.processPayment(D.contactId,D.fingerprint,D.contact);return ee!=null&&ee.error&&(me.value=!1,Le.value=q.value!==pe.value-1),!0}else await lt(D,o);else me.value=!1}catch(D){if([429].includes(D.status))return Ft.value=!0,me.value=!1,Le.value=q.value!==pe.value-1,!0;lr(),console.error(D),me.value=!1}return He(()=>{Tt.value&&et.value.scrollIntoView()}),!1},lt=async(o,r=!0,a)=>{var h,I,N,z,W,oe,re,J,G,c,u,L,U;e.formFieldsValue.updateContactOnly&&(me.value=!1,Le.value=!0);const l="_ud";let i=o==null?void 0:o.sessionFingerprint,n=o.fingerprint;if(Fo("msgsndr_id").value!==n){const B=Fo("msgsndr_id",{path:"/",maxAge:31536e3});B.value=n}Zi({sessionId:o.sessionId||null,locationId:e.formSurvey.locationId});const F=Bi(o.contact,!0);if(Wt.value=o.contactId,wt(l,JSON.stringify(F)),wt("location_"+_e.value,o.fingerprint),window.parent.postMessage(["set-sticky-contacts",l,JSON.stringify(F),_e.value,o.fingerprint],"*"),i&&await yl(_e.value,i),He(()=>{en("track",v.surveyData.formData.form.formSubmissionEvent,Ul.value)}),e.formFieldsValue.updateContactOnly){me.value=!1,Ne.value=!0;return}if(v.funnelPreview&&Bo.value.length>0&&v.redirect===!1)try{v.extra||console.error("props.extra is undefined"),o.contact||console.error("data.contact is undefined");const B=await fn(v.surveyData.locationId,he.value,Bo.value,(I=(h=_o.value)==null?void 0:h.coupon)==null?void 0:I.code,"survey",!0);Bo.value.forEach(ve=>{var Pe,qe;ve.newPrice=(qe=(Pe=B==null?void 0:B.products)==null?void 0:Pe.find($e=>$e.priceId===ve._id))==null?void 0:qe.itemSubtotalWithDiscount,ve.showNewPrice=ve.newPrice!==ve.amount*ve.qty});const D={products:Bo.value||[],tax:((N=_o.value)==null?void 0:N.taxSummary)||[],total:((z=_o.value)==null?void 0:z.amount)||0,manualPaymentMethodId:(W=a==null?void 0:a.data)==null?void 0:W.manualPaymentMethodId,orderIds:(oe=_o.value)!=null&&oe._id?[_o.value._id]:[]},ee=ln(o.contact);await We(v.extra,Ge,D,ee,!1,"","survey")}catch(B){console.error("redirectAction error:",B)}if(console.log("end of funnel preview"),e.formFieldsValue.updateContactOnly||Ml("on-submit",{fingerprint:o.fingerprint}),v.redirect===!1)return;let p=!1;if(e.formFieldsValue.disqualified)if(De.value=!0,e.formSurvey.formData.form.formAction.endsurveyType==="1"){const D=Ot(e.formSurvey.formData.form.formAction.endsurveyUrl,F);jo(D)}else Xe.value=e.formSurvey.formData.form.formAction.endsurveyText!==""?Lt(e.formSurvey.formData.form.formAction.endsurveyText,F):"Survey Ended! Please try again",Re.value={action:"submit-form",message:Xe};else if("formAction"in e.formSurvey.formData.form&&e.formSurvey.formData.form.formAction.actionType==="1"){const B=Ot(e.formSurvey.formData.form.formAction.redirect_url||e.formSurvey.formData.form.formAction.redirectUrl,F);jo(B)}else if("redirect_url"in e.formSurvey.formData.form&&e.formSurvey.formData.form.redirect_url!==""||"redirectUrl"in e.formSurvey.formData.form&&e.formSurvey.formData.form.redirectUrl!==""){const B=Ot(e.formSurvey.formData.form.redirect_url||e.formSurvey.formData.form.redirectUrl,F);jo(B)}else"formAction"in e.formSurvey.formData.form&&parseInt((c=(G=(J=(re=e.formSurvey)==null?void 0:re.formData)==null?void 0:J.form)==null?void 0:G.formAction)==null?void 0:c.actionType)==3?(De.value=!0,Re.value={action:"order",style:{width:e.formSurvey.formData.form.width,style:e.formSurvey.formData.form.style,fieldStyle:e.formSurvey.formData.form.fieldStyle},productPurchased:bt.value.map(B=>(rt.value.forEach(D=>{D._id===B.productId&&(B.showImage=D.showImage,B.showDescription=D.showDescription)}),B)),paymentType:ke.value.paymentType||Be.DONATION,isRecurringDonation:ke.value.isRecurringDonation,orderId:ke.value.orderId,donationAmount:e.formFieldsValue.payment,productSummary:er.value,couponCode:or.value,contact:o.contact},p=!0):(De.value=!0,Xe.value=e.formSurvey.formData.form.formAction.thankyouText?Lt(e.formSurvey.formData.form.formAction.thankyouText,F):"Thanks for submiting details, Will get back to you soon!");p||(Re.value={action:"submit-form",message:Xe,style:(U=(L=(u=v==null?void 0:v.surveyData)==null?void 0:u.formData)==null?void 0:L.form)==null?void 0:U.submitMessageStyle}),Ne.value=!1,r&&It(!0)},It=o=>{o?lo.value=100:lo.value=Math.round(q.value*100/pe.value)},si=o=>{var r=dn;return!!r.test(o)},cr=async o=>{var f,F,p,h,I,N,z,W,oe,re,J,G;Object.keys(e.errors).forEach(c=>delete e.errors[c]);const r=gl(e.formFieldsValue,se.value);e.formFieldsValue=r.formFieldsValue;let a=S.value[o].slideData,l=!1;for(const c of a){const u="id"in c?c.id:c.tag,L=c.type;if(u==="group_address"&&((f=Me.value)!=null&&f.autoCompleteEnabled)&&c.required&&!e.formFieldsValue[u]&&(e.errors[u]="Address selection is required",l=!0),u==="country"&&c.required&&!e.formFieldsValue[u]&&(e.errors[u]=`${c.label} is required`,l=!0),L==="rating"&&c.required&&!((F=e.formFieldsValue[u])!=null&&F.rating)&&(e.errors[u]=`${c.label} is required`,l=!0),u==="payment"&&gr.value){const U=await((h=(p=_t.value)==null?void 0:p.validate)==null?void 0:h.call(p));U&&(e.errors[u]=U.field||"Payment is required",l=!0)}if(u==="terms_and_conditions"&&c.required&&!e.formFieldsValue[u]&&(e.errors[u]="Please accept the terms and conditions",l=!0),u==="website"&&e.formFieldsValue[u]&&(si(e.formFieldsValue[u])||(e.errors[u]=`The ${c.label||"Website"} field is not a valid URL`,l=!0)),L==="text"||L==="number"||L==="email"||L==="textarea"||L==="large_text"||L==="monetory"||L==="date"||L==="website"||c.dataType==="SCORE"){if(c.tag==="phone"&&Ao.value&&(Ut&&(e.isPhoneValidObj[u]===void 0||e.isPhoneValidObj[u]===!0)?e.formFieldsValue.phone=Ao.value:(e.errors[u]="Invalid phone number",l=!0)),L==="date"&&e.formFieldsValue[c.tag]){const U=((I=c.format)==null?void 0:I.replace(/-/g,c.separator||"-"))||"YYYY-MM-DD";var i=$o(e.formFieldsValue[c.tag],U).format("YYYY-MM-DD");$o(i).isValid()?c.tag==="date_of_birth"&&$o(i).isAfter($o())&&(e.errors[u]=`${c.label} cannot be in the future`,l=!0):(e.errors[u]=`${c.label} is not a valid date`,l=!0)}if(L==="monetory"){let U=(N=e.formFieldsValue[c.tag])==null?void 0:N.replace(/,/g,"");U&&isNaN(U)?(e.errors[u]="Invalid Monetory Format",l=!0):!isNaN(U)&&U!==""&&(e.formFieldsValue[c.tag]=parseFloat(U).toFixed(2).toString())}L==="email"&&((W=(z=e.formFieldsValue[u])==null?void 0:z.trim())==null?void 0:W.length)>0&&(un.test(e.formFieldsValue[u])||(e.errors[u]="Invalid Email Address",l=!0)),L==="email"&&c.enableValidateEmail&&!c.hidden&&!zt.value&&e.formFieldsValue[u]&&(e.errors[u]=`The ${c.label} field is not verified!`,l=!0),c.tag==="phone"&&c.enableValidatePhone&&!c.hidden&&!Jt.value&&e.formFieldsValue[u]&&(e.errors[u]=`The ${c.label} field is not verified!`,l=!0),e.formFieldsValue[u]===""&&(e.formFieldsValue[u]=null),(!(u in e.formFieldsValue)||e.formFieldsValue[u]===null||e.formFieldsValue[u]===void 0||e.formFieldsValue[u]&&typeof e.formFieldsValue[u]=="string"&&((oe=e.formFieldsValue[u])==null?void 0:oe.trim().length)<=0)&&c.required===!0&&(e.errors[u]=c.label?`${c.label} is required`:"This field is required",l=!0)}else if(L==="single_options")c.required&&!e.formFieldsValue[u]&&(e.errors[u]=`${c.label} is required`,l=!0),e.formFieldsValue[u]&&!c.picklistOptions.includes(e.formFieldsValue[u])&&(e.errors[u]=`The ${c.label} field is not a valid option`,l=!0);else if(L==="multiple_options")c.required&&(!e.formFieldsValue[u]||e.formFieldsValue[u].length<=0)&&(e.errors[u]=`${c.label} is required`,l=!0),e.formFieldsValue[u]&&zi(e.formFieldsValue[u],c.picklistOptions)&&(e.errors[u]=`The ${c.label} field is not a valid option`,l=!0);else if(c.type==="textbox_list"&&c.required===!0){let U=0;const B=e.formFieldsValue[u];for(const D in B)B[D]!==""&&U++;U<=0&&(e.errors[u]=c.label?`${c.label} is required`:"This field is required",l=!0)}else if(L==="checkbox"||L==="radio")(!(u in e.formFieldsValue)||e.formFieldsValue[u]===null||e.formFieldsValue[u].length<=0)&&c.required===!0&&(e.errors[u]=c.label?`${c.label} is required`:"This field is required",l=!0);else if(L==="captcha")vt.value?e.validationError.captcha=void 0:(e.validationError.captcha="Invalid captcha",l=!0);else if(L==="phone")(!(u in e.formFieldsValue)||e.formFieldsValue[u]===null||((re=e.formFieldsValue[u])==null?void 0:re.trim().length)<=0)&&c.required===!0&&(e.errors[u]=c.label?`${c.label} is required`:"This field is required",l=!0),(!Ut||e.isPhoneValidObj[u]===!1)&&e.formFieldsValue[u]&&(e.errors[u]="Invalid phone number",l=!0);else if(L==="cascade_dropdown"){let U=0;e.formFieldsValue[u]===void 0&&c.required===!0?(e.errors[u]=c.label?`${c.label} is required`:"This field is required",l=!0):e.formFieldsValue[u]!==void 0&&c.required===!0&&(e.formFieldsValue[u].forEach(function(D){for(const ee in D)D[ee]===""&&U++}),U>0&&(e.errors[u]=c.label?`${c.label} is required`:"This field is required",l=!0))}else if(L==="file_upload"){if(c.required&&!((G=(J=e.formFieldsValue[u])==null?void 0:J.files)!=null&&G.length))e.errors[u]=`${c.label} is required`,l=!0;else if(e.formFieldsValue[u]){let U=e.formFieldsValue[u].files.length;const B=c.picklistOptions;for(let D=0;D<U;D++){const ee="."+e.formFieldsValue[u].files[D].name.split(".").pop();if(B.length>0&&B.indexOf(ee)===-1){e.errors[u]=`${c.fieldName} - File format is not supported`,l=!0;break}}}}else L==="signature"?c.required&&!e.formFieldsValue[u]&&(e.errors[u]=`${c.label} is required`,l=!0):L==="numerical"?c.required&&hl(e.formFieldsValue[u])?(e.errors[u]=`${c.name} is required`,l=!0):e.formFieldsValue[u]&&isNaN(e.formFieldsValue[u])&&(e.errors[u]=`${c.fieldName} is not a valid number`,l=!0):c.dataType==="SCORE"&&(c.required&&hl(e.formFieldsValue[u])?(e.errors[u]=`${c.label||c.name} is required`,l=!0):e.formFieldsValue[u]&&isNaN(e.formFieldsValue[u])&&(e.errors[u]=`${c.label||c.fieldName} is not a valid number`,l=!0))}return a.find(c=>c.type==="captcha")&&!vt.value?(e.validationError.captcha="Invalid captcha",l=!0):e.validationError.captcha=void 0,!l},At=o=>{var r,a,l,i;if(o.index<0&&o.index===-1)if(e.formSurvey.formData.form.formAction.disqualifiedType==="1"){e.errors={},De.value=!0,xe.value=!1;const f=(i=(l=(a=(r=e==null?void 0:e.formSurvey)==null?void 0:r.formData)==null?void 0:a.form)==null?void 0:l.formAction)==null?void 0:i.disqualifiedUrl;jo(f)}else return e.errors={},De.value=!0,xe.value=!1,Xe.value=e.formSurvey.formData.form.formAction.disqualifiedText!==""?Lt(e.formSurvey.formData.form.formAction.disqualifiedText,e.formFieldsValue):"Survey Disqualified! Please try again",Re.value={action:"submit-form",message:Xe},lo.value=100,o;else return o.index<0&&o.index===-2&&(e.errors={},eo.value=!0,delete o.index),o},Vt=o=>{kt()},we=o=>{let r={};const a=["header","image","html","source"];if(bo.value)if(r=S.value[q.value],"slideData"in r&&r.slideData.length>1){let l;for(let i=r.slideData.length-1;i>=0;i--){const n=r.slideData[i];if(!(a.indexOf(n.tag)>=0)){l=n;break}}l&&e.formFieldsValue[l.tag]!==void 0&&Vt()}else Vt();else Vt()},Te=(o,r=!1)=>{var n,f,F,p,h,I,N,z,W,oe,re,J,G,c,u,L,U,B,D,ee,ve,Pe,qe,$e,to,fo,co;if(!((F=(f=(n=e.formSurvey)==null?void 0:n.formData)==null?void 0:f.form)!=null&&F.conditionalLogic)||!((p=e.formSurvey.formData.form.conditionalLogic)!=null&&p.length))return;const a={...o};if(se.value&&r&&(a.country=se.value),a!=null&&a.phone&&r){const Q=(I=(h=window.libphonenumber)==null?void 0:h.parsePhoneNumberFromString(o.phone,e.phoneCountryCode.phone))==null?void 0:I.number;Q&&(a.phone=Q)}const l=(Q,C,Z,g)=>po(Q,C,Z,g,S.value);if(r){so.value&&(S.value=Do(so.value));const Q=new Set,C=new Set;let Z=null;const g=e.formSurvey.formData.form.conditionalLogic.filter(_=>{var y;return((y=_==null?void 0:_.outcome)==null?void 0:y.type)==="showHideFields"});for(let _=0;_<g.length;_++){const y=g[_];if(!y.conditions||!y.conditions.length)continue;let k=!1;if(y.conditionalOperation==="and"){k=!0;for(let V=0;V<y.conditions.length;V++){const O=y.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T];if(!l(E,O.selectedField,R,P)){k=!1;break}}}else for(let V=0;V<y.conditions.length;V++){const O=y.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T];if(l(E,O.selectedField,R,P)){k=!0;break}}if(k){const{hideType:V,value:O}=y.outcome;if(!O)continue;const T=Array.isArray(O)?O:[O],E=P=>ji(S.value,P);V.includes("Hide")?T.forEach(P=>C.add(ml(P,E))):V.includes("Show")&&T.forEach(P=>Q.add(ml(P,E)))}}Q.forEach(_=>C.delete(_)),so.value&&(S.value=Do(so.value)),S.value=S.value.map(_=>_.slideData?{..._,slideData:_.slideData.map(y=>{var k,ne,V;if(Q.has(y.hiddenFieldQueryKey)){const O=((ne=(k=v.surveyData)==null?void 0:k.formData)==null?void 0:ne.slides)||[];let T=null;for(const E of O){const P=(V=E.slideData)==null?void 0:V.find(d=>d.hiddenFieldQueryKey===y.hiddenFieldQueryKey);if(P){T=P;break}}return{...y,hidden:!1,hiddenFieldValue:(T==null?void 0:T.hiddenFieldValue)||"",required:(T==null?void 0:T.required)||y._originalRequired||!1}}else if(C.has(y.hiddenFieldQueryKey))return y._originalRequired===void 0&&(y._originalRequired=y.required),{...y,hidden:!0,required:!1};return y})}:Q.has(_.hiddenFieldQueryKey)?{..._,hidden:!1,required:_._originalRequired||_.required||!1}:C.has(_.hiddenFieldQueryKey)?(_._originalRequired===void 0&&(_._originalRequired=_.required),{..._,hidden:!0,required:!1}):_);const w=e.formSurvey.formData.form.conditionalLogic.filter(_=>{var y;return((y=_==null?void 0:_.outcome)==null?void 0:y.type)==="jumpTo"});for(let _=0;_<w.length;_++){const y=w[_];if(!y.conditions||!y.conditions.length)continue;const k=S.value[q.value];let ne=!1;const V=Array.isArray((z=(N=v.surveyData)==null?void 0:N.formData)==null?void 0:z.slides)?v.surveyData.formData.slides.map(E=>String(E.id)):[];if(k&&k.slideData)for(let E=0;E<y.conditions.length;E++){const P=y.conditions[E];let{selectedField:d}=P;const R=Oe(d);R!==null&&(d=R);let Y=k.slideData.find(b=>b.tag===d||b.id===d);if(!Y&&V.includes(String(P.selectedField))&&String(P.selectedField)===String(k.id)&&(Y=!0),Y){ne=!0;break}}if(!ne)continue;let O=!1;if(y.conditionalOperation==="and"){O=!0;for(let E=0;E<y.conditions.length;E++){const P=y.conditions[E];let{selectedField:d,selectedOperation:R,inputValue:Y}=P;const b=Oe(d);b!==null&&(d=b);let M=!1;if(V.includes(String(P.selectedField)))M=String(P.selectedField)===String(k.id);else{const K=a[d];if(K===void 0){O=!1;break}M=l(R,P.selectedField,K,Y)}if(!M){O=!1;break}}}else for(let E=0;E<y.conditions.length;E++){const P=y.conditions[E];let{selectedField:d,selectedOperation:R,inputValue:Y}=P;const b=Oe(d);b!==null&&(d=b);let M=!1;if(V.includes(String(P.selectedField)))M=String(P.selectedField)===String(k.id);else{const K=a[d];if(K===void 0)continue;M=l(R,P.selectedField,K,Y)}if(M){O=!0;break}}if(O){const{jumpTarget:E}=y.outcome;if(E){const P=Date.now();if(e.lastJumpTarget===E&&P-e.lastJumpTime<3e3||e.preventJumpAfterBack||e.userInitiatedBack||e.lastJumpTime&&P-e.lastJumpTime<1e3||e.isJumpActive)continue;if(E==="submitSurvey"){Z={targetIndex:-1,jumpTarget:E,step:y,submit:!0};continue}let d=-1;for(let R=0;R<S.value.length;R++)if(S.value[R]&&S.value[R].id===E){d=R;break}if(d===-1){const R=v.surveyData.formData.slides;if(Array.isArray(R)){const Y=R.findIndex(b=>b.id===E);if(Y>=0)if(bo.value){const b=R[Y];for(let M=0;M<S.value.length;M++){const K=S.value[M];if(K&&(K.id===b.id||K.slideName&&b.slideName&&K.slideName===b.slideName)){d=M;break}}}else d=Y}}if(d>=0&&d<S.value.length){if(d===q.value)continue;Z||(Z={targetIndex:d,jumpTarget:E,step:y})}}}}const de=e.formSurvey.formData.form.conditionalLogic.filter(_=>{var y,k;return((y=_==null?void 0:_.outcome)==null?void 0:y.type)==="disqualifyLead"&&((k=_==null?void 0:_.outcome)==null?void 0:k.disqualifyTiming)==="disqualifyImmediately"});for(let _=0;_<de.length;_++){const y=de[_];if(!y.conditions||!y.conditions.length)continue;let k=!1;if(y.conditionalOperation==="and"){k=!0;for(let V=0;V<y.conditions.length;V++){const O=y.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T];if(!po(E,O.selectedField,R,P,S.value)){k=!1;break}}}else for(let V=0;V<y.conditions.length;V++){const O=y.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T];if(po(E,O.selectedField,R,P,S.value)){k=!0;break}}if(k){if(e.errors={},De.value=!0,xe.value=!1,((W=y.outcome)==null?void 0:W.disqualifyAction)==="openUrl"){const V=(oe=y.outcome)==null?void 0:oe.value;if(V&&V.trim().length>0){jo(V);return}}Xe.value=((re=y.outcome)==null?void 0:re.value)||"Survey Disqualified! Please try again",Re.value={action:"submit-form",message:Xe.value};return}}const ge=e.formSurvey.formData.form.conditionalLogic.filter(_=>{var y,k;return((y=_==null?void 0:_.outcome)==null?void 0:y.type)==="disqualifyLead"&&((k=_==null?void 0:_.outcome)==null?void 0:k.disqualifyTiming)!=="disqualifyImmediately"});for(let _=0;_<ge.length;_++){const y=ge[_];if(!y.conditions||!y.conditions.length)continue;let k=!1;if(y.conditionalOperation==="and"){k=!0;for(let V=0;V<y.conditions.length;V++){const O=y.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T];if(!po(E,O.selectedField,R,P,S.value)){k=!1;break}}}else for(let V=0;V<y.conditions.length;V++){const O=y.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T];if(po(E,O.selectedField,R,P,S.value)){k=!0;break}}if(k){e.formSurvey.formData.form.disqualified=!0,((J=y.outcome)==null?void 0:J.disqualifyAction)==="openUrl"?(e.formSurvey.formData.form.formAction.actionType="1",e.formSurvey.formData.form.formAction.redirectUrl=(G=y.outcome)==null?void 0:G.value,e.formSurvey.formData.form.formAction.redirect_url=(c=y.outcome)==null?void 0:c.value,e.formSurvey.formData.form.formAction.endsurveyType="1",e.formSurvey.formData.form.formAction.endsurveyUrl=(u=y.outcome)==null?void 0:u.value):(e.formSurvey.formData.form.formAction.actionType="2",e.formSurvey.formData.form.formAction.thankyouText=((L=y.outcome)==null?void 0:L.value)||"Survey Disqualified! Please try again",e.formSurvey.formData.form.formAction.endsurveyType="2",e.formSurvey.formData.form.formAction.endsurveyText=((U=y.outcome)==null?void 0:U.value)||"Survey Disqualified! Please try again"),ie.value.includes("conditional_logic_disqualification")||ie.value.push("conditional_logic_disqualification");break}}if(ge.length>0){let _=!1;for(let y=0;y<ge.length;y++){const k=ge[y];if(!k.conditions||!k.conditions.length)continue;let ne=k.conditionalOperation==="and";for(let V=0;V<k.conditions.length;V++){const O=k.conditions[V];let{selectedField:T,selectedOperation:E,inputValue:P}=O;const d=Oe(T);d!==null&&(T=d);const R=a[T],Y=po(E,O.selectedField,R,P,S.value);if(k.conditionalOperation==="and"&&!Y){ne=!1;break}else if((k.conditionalOperation==="or"||k.conditionalOperation==="then")&&Y){ne=!0;break}}if(ne){_=!0;break}}if(!_&&(Ee.value&&(e.formSurvey.formData.form.formAction.actionType=Ee.value.actionType,e.formSurvey.formData.form.formAction.thankyouText=Ee.value.thankyouText,e.formSurvey.formData.form.formAction.redirectUrl=Ee.value.redirectUrl,e.formSurvey.formData.form.formAction.redirect_url=Ee.value.redirect_url,Ee.value.endsurveyType&&(e.formSurvey.formData.form.formAction.endsurveyType=Ee.value.endsurveyType),Ee.value.endsurveyText&&(e.formSurvey.formData.form.formAction.endsurveyText=Ee.value.endsurveyText),Ee.value.endsurveyUrl&&(e.formSurvey.formData.form.formAction.endsurveyUrl=Ee.value.endsurveyUrl)),e.formSurvey.formData.form.disqualified=void 0,ie.value.includes("conditional_logic_disqualification"))){const y=ie.value.indexOf("conditional_logic_disqualification");ie.value.splice(y,1)}}if(Z){const{targetIndex:_,jumpTarget:y}=Z;if(uo.value){e.pendingJumpIndex=_;return}if(!e.isJumpActive){(!e.pendingJumpIndex||_>e.pendingJumpIndex)&&(e.pendingJumpIndex=_);return}if(y==="submitSurvey"){me.value=!1,Promise.resolve().then(()=>Uo(!0));return}e.lastJumpTarget=y,e.lastJumpTime=Date.now(),e.jumpSourceSlide=q.value,e.isJumpActive=!0,e.preventJumpAfterBack=!0,bo.value?(e.errors={},He(()=>{Je({source:"logic",index:_,isJump:!0})})):Je({source:"logic",index:_,isJump:!0});return}Bt(v.urlParams,Ve,e.phoneCountryIncluded,se.value,e.formFieldsValue,S.value,Me.value,!0).then(_=>{_&&(e.phoneCountryIncluded=_.phoneCountryIncluded,e.formFieldsValue=_.formFieldsValue,se.value=_.formattedCountry,S.value=_.formFields)});return}const i=e.formSurvey.formData.form.conditionalLogic.filter(Q=>{var C,Z;return Q.conditions!==null&&((C=Q==null?void 0:Q.outcome)==null?void 0:C.type)!=="showHideFields"&&((Z=Q==null?void 0:Q.outcome)==null?void 0:Z.type)!=="jumpTo"});if(i.length)for(let Q=0;Q<i.length;Q++){const C=i[Q];let Z=C.conditionalOperation==="and";const g={...a};if(!(!C.conditions||!C.conditions.length)){for(let w=0;w<C.conditions.length;w++){let{selectedField:de,selectedOperation:ge,inputValue:_}=C.conditions[w];const y=C.conditions[w].selectedField;de==="country"&&!r&&qt[g[de]]&&(g[de]=qt[g[de]]);const k=Oe(de);k!==null&&(de=k);const ne=g[de],V=po(ge,y,ne,_,S.value);if(C.conditionalOperation==="and"&&!V){Z=!1;break}if((C.conditionalOperation==="or"||C.conditionalOperation==="then")&&V){Z=!0;break}}if(Z){((B=C.outcome)==null?void 0:B.type)==="displayCustomMessage"||((D=C.outcome)==null?void 0:D.type)==="disqualifyLead"&&((ee=C.outcome)==null?void 0:ee.disqualifyAction)==="showCustomMessage"?(e.formSurvey.formData.form.formAction.actionType="2",e.formSurvey.formData.form.formAction.thankyouText=C.outcome.value):(((ve=C.outcome)==null?void 0:ve.type)==="redirectToUrl"||((Pe=C.outcome)==null?void 0:Pe.type)==="disqualifyLead"&&((qe=C.outcome)==null?void 0:qe.disqualifyAction)==="openUrl")&&(e.formSurvey.formData.form.formAction.actionType="1",e.formSurvey.formData.form.formAction.redirectUrl=C.outcome.value,e.formSurvey.formData.form.formAction.redirect_url=C.outcome.value),(($e=C.outcome)==null?void 0:$e.type)==="disqualifyLead"&&(e.formSurvey.formData.form.disqualified=!0);break}else((fo=(to=e.formSurvey.formData.form)==null?void 0:to.payment)!=null&&fo.required||xo.value||wo.value)&&!((co=S.value)!=null&&co.some(w=>{var de;return(de=w.slideData)==null?void 0:de.some(ge=>ge.hiddenFieldQueryKey==="payment"&&ge.hidden)}))&&(e.formSurvey.formData.form.formAction.actionType=v.surveyData.formData.form.formAction.actionType,e.formSurvey.formData.form.formAction.thankyouText=v.surveyData.formData.form.formAction.thankyouText,e.formSurvey.formData.form.formAction.redirectUrl=v.surveyData.formData.form.formAction.redirectUrl,e.formSurvey.formData.form.disqualified=void 0)}}},ui=o=>{eo.value=!1;let r={},a={source:"logic"};if(e.multiStoreSkipLogic={},r=S.value[q.value],r!==void 0&&"logic"in r&&Object.keys(r.logic).length>0&&(o.type==="single_options"||o.type==="checkbox"||o.type==="radio")&&(o.id in r.logic||o.tag in r.logic)){const l=e.formFieldsValue[o.tag],i=r.logic[o.tag];for(const n in i)!Array.isArray(l)&&i[n].optionName===l?a={source:"logic",index:i[n].index}:Array.isArray(l)&&l.indexOf(i[n].optionName)>=0&&o.picklistOptions[Qt.value]===i[n].optionName&&(a={source:"logic",index:i[n].index})}if("index"in a){if(a=At(a),eo.value&&ie.value.indexOf(o.id)<0&&ie.value.push(o.id),!eo.value&&ie.value.includes(o.id)){const l=ie.value.indexOf(o.id);ie.value.splice(l,1)}}else{const l=ie.value.indexOf(o.id);l>-1&&ie.value.splice(l,1)}xe.value&&o.type!=="checkbox"&&!uo.value?we():xe.value&&o.type==="checkbox"&&(e.multiStoreSkipLogic=a),uo.value&&"index"in a&&(e.pendingJumpIndex=a.index)},di=o=>{eo.value=!1;let r="",a={},l={source:"logic"};if(e.multiStoreSkipLogic={},a=S.value[q.value],a!==void 0&&"logic"in a&&Object.keys(a.logic).length>0&&(o.type==="single_options"||o.type==="checkbox"||o.type==="radio")){const i=[];a.slideData.forEach(f=>{i.push({id:f.tag,value:f.type==="single_options"?o.selectedOption:e.formFieldsValue[f.tag]})});const n=a.logic;i.forEach(f=>{for(const F in n)if(f&&f.id===F)for(const p in n[F])!Array.isArray(f.value)&&n[F][p].optionName===f.value?(r=it(n[F][p].id),l={source:"logic",index:r}):Array.isArray(f.value)&&f.value.indexOf(n[F][p].optionName)>=0&&(r=it(n[F][p].id),l={source:"logic",index:r})})}if("index"in l){if(l=At(l),eo.value&&ie.value.indexOf(o.id)<0&&ie.value.push(o.id),!eo.value&&ie.value.includes(o.id)){const i=ie.value.indexOf(o.id);ie.value.splice(i,1)}}else{const i=ie.value.indexOf(o.id);if(i>-1)ie.value.splice(i,1);else{const n=v.surveyData.formData.slides[q.value];let f=n&&n.jumpTo,{slides:F}=v.surveyData.formData;if(f){for(let p=0;p<S.value.length;p++)if(S.value[p]&&S.value[p].id===f){l={source:"logic",index:p};break}if(!("index"in l)&&Array.isArray(F)){const p=F.find(h=>h.id===f);if(p){for(let h=0;h<S.value.length;h++)if(S.value[h].slideName===p.slideName){l={source:"logic",index:h};break}}}}}}xe.value&&o.type!=="checkbox"&&!uo.value?we():xe.value&&o.type==="checkbox"&&(e.multiStoreSkipLogic=l),uo.value&&"index"in l&&(e.pendingJumpIndex=l.index)},it=o=>{let r;return bo.value?r=S.value.findIndex(a=>a.id===o):r=S.value.findIndex(a=>{if(a.slideData.filter(i=>i.id===o||i.tag===o).length>0)return!0}),r===-1&&(r=q.value+1),o==="endsurvey"?r=-2:o==="disqualify"&&(r=-1),r},Mo=(o,r=!1)=>{o.type==="single_options"?(e.lastJumpTarget=null,e.lastJumpTime=0,e.userInitiatedBack=!1,o.selectedOption!==void 0&&(e.formFieldsValue={...e.formFieldsValue,[o.tag]:o.selectedOption})):(o.type==="radio"||o.type==="checkbox")&&e.userInitiatedBack&&(e.userInitiatedBack=!1,e.lastJumpTarget=null,e.lastJumpTime=0);const a=Date.now();!r&&(e.lastJumpTime!==0&&a-e.lastJumpTime<1e3||e.isJumpActive)||(Te(e.formFieldsValue,!0),Ht.value?di(o):ui(o))},fi=o=>{const{item:r,event:a}=o;e.formFieldsValue[r.tag]=a.target.value},mr=()=>{Zo.value=!0,setTimeout(()=>{Zo.value=!1},1e3)},kt=()=>{if(nt.value||mr(),e.isJumpActive=!1,e.preventJumpAfterBack=!1,e.pendingJumpIndex,e.pendingJumpIndex=null,Te(e.formFieldsValue,!0),e.pendingJumpIndex!==null){Je({source:"logic",index:e.pendingJumpIndex,isJump:!0});return}let o={source:"logic"},r="";const a=S.value[q.value];if(a!==void 0&&"logic"in a&&Object.keys(a.logic).length>0){let l=[];const i=a.slideData.filter(n=>n.type!=="img"&&n.type!=="h1"&&n.type!=="html");bo.value?l=i:l.push(i[0]),l.forEach(function(n,f){if(n&&n.id in a.logic&&n.id in e.formFieldsValue&&(n.type==="single_options"||n.type==="checkbox"||n.type==="radio")){const F=a.logic[n.id],p=e.formFieldsValue[n.id];for(const h in F)if(!Array.isArray(p)&&F[h].optionName===p)r=it(F[h].id),o={source:"logic",index:r};else if(Array.isArray(p)&&p.indexOf(F[h].optionName)>=0){r=it(F[h].id);const I=e.formFieldsValue[n.tag].map(function(N){return n.picklistOptions.indexOf(N)});n.picklistOptions[Math.max(...I)]===F[h].optionName&&(o={source:"logic",index:r})}}})}if(o&&o.index===-1)return At(o);if(o&&o.index===-2&&(e.errors={},eo.value=!0,delete o.index),o.hasOwnProperty("index"))Je(o);else{if(uo.value&&e.pendingJumpIndex!==null){Je({source:"logic",index:e.pendingJumpIndex});return}const l=v.surveyData.formData.slides[q.value];let i=l&&l.jumpTo,{slides:n}=v.surveyData.formData;if(i&&!e.preventJumpAfterBack){for(let f=0;f<S.value.length;f++)if(S.value[f]&&S.value[f].id===i){e.jumpSourceSlide=q.value,e.isJumpActive=!0,Je({source:"logic",index:f,isJump:!0});return}if(Array.isArray(n)){const f=n.find(F=>F.id===i);if(f){for(let F=0;F<S.value.length;F++)if(S.value[F].slideName===f.slideName){e.jumpSourceSlide=q.value,e.isJumpActive=!0,Je({source:"logic",index:F,isJump:!0});return}}}Je(o)}else Je(o)}},Je=async o=>{e.isJumpActive||Te(e.formFieldsValue,!0),e.userInitiatedBack=!1,o.source!=="logic"&&(e.lastJumpTarget=null,e.preventJumpAfterBack&&(e.preventJumpAfterBack=!1));const r=q.value===pe.value-1,a=o.autoSubmit===!0;if(r&&!a&&(me.value=!1),No({tag:"phone"}),e.errors={},Eo.value=[],!Le.value)return Promise.resolve().then(()=>Uo(!0)),!1;if(Object.keys(e.multiStoreSkipLogic).length>1&&(o={source:e.multiStoreSkipLogic.source,index:e.multiStoreSkipLogic.index},e.multiStoreSkipLogic={}),Lo.value=parseInt(q.value),no.value=Object.keys(o).length>0&&"index"in o?o.index:e.pendingJumpIndex!==null?e.pendingJumpIndex:Lo.value+1,e.pendingJumpIndex!==null&&(e.pendingJumpIndex=null),no.value<pe.value)for(;no.value<pe.value-1&&!Sr(no.value);)no.value++;let l=!0;if(!o.bypassValidation&&(l=await cr(Lo.value),!l))return o.isJump&&(e.isJumpActive=!1,e.preventJumpAfterBack=!1),Sl(e,S.value,q.value,he.value),!1;if(q.value<pe.value){if(ot.value&&zo.value){const i=await Uo(!1);if(i)return i}else if(ot.value){const i=await Uo(!1);if(i)return i}vr(Lo.value,no.value),o.isJump&&setTimeout(()=>{e.isJumpActive=!1},100)}},vr=(o,r)=>{var F;const a=To.value[o];a.classList.add("ghl-page-rotateSlideOutNext");const l=To.value[r];l.classList.add("ghl-page-current"),l.classList.add("ghl-page-rotateSlideInNext"),io.value.classList.add("setOverflow"),q.value,nt.value?(a.classList.remove("ghl-page-rotateSlideOutNext"),a.classList.remove("ghl-page-current"),l.classList.remove("ghl-page-rotateSlideInNext"),io.value.classList.remove("setOverflow")):(a.style.position="absolute",setTimeout(()=>{a.style.position="",a.classList.remove("ghl-page-rotateSlideOutNext"),a.classList.remove("ghl-page-current"),l.classList.remove("ghl-page-rotateSlideInNext"),io.value.classList.remove("setOverflow")},1e3)),Se[Se.value.length-1]!=r&&!Se.value.includes(r)&&Se.value.push(r),q.value=r,(q.value>=1||Pt.value&&Se.value.length>2)&&(Ne.value=!0),q.value===pe.value-1&&(Le.value=!1,me.value=!1),It();let n=ft(e.formSurvey.locationId);Ve.query.notrack||ut({fingerprint:n,eventType:"slide-view",mediumId:v.id,medium:"survey",locationId:e.formSurvey.locationId,name:e.formSurvey.name,slideName:(F=S.value[r])==null?void 0:F.slideName});const f=e.isJumpActive||e.lastJumpTime&&Date.now()-e.lastJumpTime<1e3;He(()=>{setTimeout(()=>{if(f){const p=e.preventJumpAfterBack;e.preventJumpAfterBack=!0,Te(e.formFieldsValue,!0),setTimeout(()=>{e.preventJumpAfterBack=p},1500)}else Te(e.formFieldsValue,!0);if(!f){const p=S.value[q.value];p&&p.slideData&&p.slideData.forEach(h=>{e.formFieldsValue[h.tag]!==void 0&&e.formFieldsValue[h.tag]!==null&&e.formFieldsValue[h.tag]!==""&&(h.type==="radio"||h.type==="single_options"||h.type==="checkbox")&&Mo(h,!0)})}},50),Tt.value&&et.value.scrollIntoView()})},yr=()=>{e.userInitiatedBack=!0,e.preventJumpAfterBack,e.preventJumpAfterBack=!0,No({tag:"phone"}),nt.value||mr(),e.errors={};const o=Se.value[Se.value.length-1];if(Se.value.length<2){Ne.value=!1;return}let r;if(e.isJumpActive&&e.jumpSourceSlide!==null)r=e.jumpSourceSlide,e.isJumpActive=!1,e.preventJumpAfterBack=!0,setTimeout(()=>{e.preventJumpAfterBack=!1},2e3),e.jumpSourceSlide=null;else for(r=Se.value[Se.value.length-2];r>0&&!Sr(r);)Se.value.pop(),r=Se.value[Se.value.length-2];const a=To.value[o];a.classList.add("ghl-page-rotateSlideOutPrev");const l=To.value[r];l.classList.add("ghl-page-current"),l.classList.add("ghl-page-rotateSlideInPrev"),io.value.classList.add("setOverflow"),ci(r),nt.value?(a.classList.remove("ghl-page-rotateSlideOutPrev"),a.classList.remove("ghl-page-current"),l.classList.remove("ghl-page-rotateSlideInPrev"),io.value.classList.remove("setOverflow")):(a.style.position="absolute",setTimeout(()=>{a.style.position="",a.classList.remove("ghl-page-rotateSlideOutPrev"),a.classList.remove("ghl-page-current"),l.classList.remove("ghl-page-rotateSlideInPrev"),io.value.classList.remove("setOverflow")},1e3)),Se.value.pop(),q.value=r,q.value<=0&&(Ne.value=!1),q.value!==S.value.length-1&&(Le.value=!0),It(),setTimeout(()=>{e.preventJumpAfterBack=!1,He(()=>{Te(e.formFieldsValue,!0)}),setTimeout(()=>{e.userInitiatedBack=!1},1e3)},500),He(()=>{Tt.value&&et.value.scrollIntoView()})},ci=o=>{const r=S.value[o];r&&r.slideData&&r.slideData.forEach(a=>{a.tag&&e.formFieldsValue[a.tag]!==void 0&&(a.type==="single_options"||a.type==="radio"||a.type==="checkbox")&&delete e.formFieldsValue[a.tag]})},mi=o=>{e.formFieldsValue[o.tag]=""},vi=o=>{const{date:r,item:a}=o;e.formFieldsValue[a.tag]=r,!uo.value&&r&&we()},pr=o=>{const r=e.formSurvey.formData.slides.reduce((l,i)=>[...l,...i.slideData],[]);nn({fields:r},r,o).forEach(({hiddenFieldQueryKey:l,result:i})=>{e.formFieldsValue[l]=i})};So(S,()=>{ur()});const yi=hn(o=>{if(e.preventJumpAfterBack)return;const r=q.value;Te(o,!0),pr(o),q.value},vl()?0:500);So(()=>e.formFieldsValue,o=>{e.preventJumpAfterBack||yi(o)},{deep:!0}),So(()=>v.urlParams,()=>{v.urlParams&&Bt(v.urlParams,Ve,e.phoneCountryIncluded,se.value,e.formFieldsValue,Ze.value,Me.value).then(o=>{e.phoneCountryIncluded=o.phoneCountryIncluded,e.formFieldsValue=o.formFieldsValue,se.value=o.formattedCountry})}),So(()=>v.stickyContactData,()=>{if(v.stickyContactData&&Vo.value){if(Ae.value=S.value.map(o=>o.slideData.map(r=>r.tag)).reduce((o,r)=>[...new Set([...o,...r])],[]),!Ae.value.length){ze.value=!0;return}Rt(v.stickyContactData,_e.value,Ae.value,e.formFieldsValue,e.phoneCountryIncluded,se.value,Me.value).then(o=>{e.formFieldsValue=o.formFieldsValue,e.phoneCountryIncluded=o.phoneCountryIncluded,se.value=o.formattedCountry}).catch(o=>{console.error("Failed at fillDataFromCookie",o)})}}),So(ce,o=>{var r,a;(a=(r=v.surveyData)==null?void 0:r.formData)!=null&&a.form&&fr(v.surveyData.formData.form)});const pi=(o,r)=>{var a;wo.value=o.length>0,bt.value=o,er.value=r,e.formFieldsValue.payment=(mn((a=bt.value[0])==null?void 0:a.currency)||"$")+r.summary.total},gi=o=>{or.value=o},hi=o=>{var r;_o.value=o,Bo.value=o.items.map(a=>{var l;return{...a,id:a._id,amount:a.price.amount,bumpProduct:!!a.bumpProduct,funnel:Ge.value.funnelId,step:Ge.value.stepId,locationId:Ge.value.locationId,max:o.max,couponCode:(l=o.coupon)==null?void 0:l.code}}),ke.value.orderId=o._id,ke.value.paymentType=Be.PRODUCT,ke.value.amount=o.amount,ke.value.currency=o.currency,ke.value.isRecurringDonation=(r=o==null?void 0:o.meta)==null?void 0:r.isRecurringDonation},zo=fe(()=>{var o,r;return(r=(o=S.value[q.value])==null?void 0:o.slideData)==null?void 0:r.filter(a=>a.type==="payment"&&!a.hidden).length}),gr=fe(()=>{var o,r,a,l,i,n,f,F,p,h,I,N,z,W,oe,re,J,G,c;return St.value||(r=(o=S.value.filter(u=>u.hiddenFieldQueryKey==="payment"))==null?void 0:o[0])!=null&&r.hidden?!1:((n=(i=(l=(a=e.formSurvey)==null?void 0:a.formData)==null?void 0:l.form)==null?void 0:i.payment)==null?void 0:n.paymentType)===Be.PRODUCT?zo.value&&((h=(p=(F=(f=e.formSurvey)==null?void 0:f.formData)==null?void 0:F.form)==null?void 0:p.payment)==null?void 0:h.required)&&((oe=(W=(z=(N=(I=e.formSurvey)==null?void 0:I.formData)==null?void 0:N.form)==null?void 0:z.payment)==null?void 0:W.products)==null?void 0:oe.length)||wo.value&&zo.value:zo.value&&(((c=(G=(J=(re=e.formSurvey)==null?void 0:re.formData)==null?void 0:J.form)==null?void 0:G.payment)==null?void 0:c.required)||xo.value)}),_i=fe(()=>Ri.find(o=>o.code===pt.value)||{}),Et=fe(()=>Wo.value||pt.value),nt=fe(()=>{var o,r,a;return ko.value||((a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)==null?void 0:a.isAnimationDisabled)}),Tt=fe(()=>{var o,r,a;return(a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)==null?void 0:a.isSurveyScrollEnabled}),hr=fe(()=>Object.values(qt)),Pt=fe(()=>{var o,r,a;return((a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)==null?void 0:a.isBackButtonEnable)&&Ne.value}),uo=fe(()=>{var o,r,a;return(a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)==null?void 0:a.disableAutoNavigation}),_r=fe(()=>{var o,r,a,l,i,n;return!((a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)!=null&&a.hasOwnProperty("isProgressBarEnabled")&&((n=(i=(l=e.formSurvey)==null?void 0:l.formData)==null?void 0:i.form)==null?void 0:n.isProgressBarEnabled)===!1)});fe(()=>{for(const o in X.value)o.resizeCanvas&&He(()=>{o.resizeCanvas.resizeCanvas()});ho.value&&he.value&&window.parent.postMessage(["highlevel.setHeight",{height:ho.value.clientHeight,id:he.value}],"*")});const bi=fe(()=>v.surveyData!=null&&Mt.value&&ze.value&&!De.value),bo=fe(()=>!gt.value||v.surveyData.formData.slides.length>1),br=fe(()=>ce.value?oo.value:Xo.value),Si=fe(()=>{var o,r,a,l,i,n;return ce.value?(a=(r=(o=oo.value)==null?void 0:o.computedStyles)==null?void 0:r.styles)==null?void 0:a.surveyWrapper:(n=(i=(l=Xo.value)==null?void 0:l.computedStyles)==null?void 0:i.styles)==null?void 0:n.surveyWrapper}),Jo=fe(()=>{var o,r;return ce.value?(o=oo.value)==null?void 0:o.stickyFooter:(r=Xo.value)==null?void 0:r.stickyFooter}),Fi=fe(()=>{var r,a,l,i,n,f,F,p,h,I,N,z;const o=ce.value?((i=(l=(a=(r=e.formSurvey)==null?void 0:r.formData)==null?void 0:a.form)==null?void 0:l.style)==null?void 0:i.mobilePadding)||((p=(F=(f=(n=e.formSurvey)==null?void 0:n.formData)==null?void 0:f.form)==null?void 0:F.style)==null?void 0:p.padding):(z=(N=(I=(h=e.formSurvey)==null?void 0:h.formData)==null?void 0:I.form)==null?void 0:N.style)==null?void 0:z.padding;return(o==null?void 0:o.extraPaddingComputingProcessed)===!0});[ao,Ke]=Hi(()=>ti()),await ao,Ke(),Ue.value=Math.random().toString(36).slice(2),setTimeout(()=>{Bt(v.urlParams,Ve,e.phoneCountryIncluded,se.value,e.formFieldsValue,Ze.value,Me.value).then(o=>{e.phoneCountryIncluded=o.phoneCountryIncluded,e.formFieldsValue=o.formFieldsValue,se.value=o.formattedCountry})},100),ur(),S.value.length&&S.value.forEach((o,r)=>{o.slideData.forEach((a,l)=>{if(a.type==="html"&&a&&"html"in a){const i=a.html.replace(/[]/g,"'").replace(/[""]/g,'"').replace(/[""]/g,'"');Ol.value.push({scriptString:i,index:r,indexChild:l})}})}),il(async()=>{if(await vn(),!v.funnelPreview&&Yo.value!==void 0&&Yo.value!==""&&He(()=>{Xi(Yo.value,v.surveyData.formData.form.pageViewEvent)}),setTimeout(()=>{ze.value=!0,ht.value=new Date().getTime()},0),setTimeout(()=>{Di(),setTimeout(()=>{Object.keys(e.formFieldsValue).length>0&&Ct(e.formFieldsValue,0)},200)},300),Vo.value){if(!Ae.value){const o=Ze.value.filter(r=>r.type!=="img"&&r.type!=="h1"&&r.type!=="html").map(r=>r.tag);Ae.value=[...new Set(o,S.value.map(r=>r.slideData.map(a=>a.tag)))]}if(!Ae.value.length){ze.value=!0;return}Rt(void 0,_e.value,Ae.value,e.formFieldsValue,e.phoneCountryIncluded,se.value,Me.value).then(o=>{o&&(e.formFieldsValue=o==null?void 0:o.formFieldsValue,e.phoneCountryIncluded=o==null?void 0:o.phoneCountryIncluded,se.value=o==null?void 0:o.formattedCountry)}).catch(o=>{console.error("Failed at fillDataFromCookie",o)})}if(He(()=>{window.top!==window.self&&ho.value.classList.add("in-iframe"),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Android/i))&&(ce.value=!0)}),Ve.query.hasOwnProperty("sticky_contact_help")&&Ve.query.sticky_contact_help==="true"&&(console.log("%c Sticky Contact data","color: black; font-weight: bold; background-color: white"),console.log("%c ===================","color: black; font-weight: bold; background-color: white"),console.log(JSON.parse(localStorage.getItem("_ud"))),console.log("%c ===================","color: black; font-weight: bold; background-color: white")),v.stickyContactData&&Vo.value){if(!Ae.value&&!Ae.value){const o=Ze.value.filter(r=>r.type!=="img"&&r.type!=="h1"&&r.type!=="html").map(r=>r.tag);Ae.value=[...new Set(o,S.value.map(r=>r.slideData.map(a=>a.tag)))]}if(!Ae.value.length){ze.value=!0;return}Rt(v.stickyContactData,_e.value,Ae.value,e.formFieldsValue,e.phoneCountryIncluded,se.value,Me.value).then(o=>{e.formFieldsValue=o.formFieldsValue,e.phoneCountryIncluded=o.phoneCountryIncluded,se.value=o.formattedCountry}).catch(o=>{console.error("Failed at fillDataFromCookie",o)})}if(ze.value=!0,ht.value=new Date().getTime(),!Ve.query.notrack){let o=ft(e.formSurvey.locationId);o||(o=nl(),yl(e.formSurvey.locationId,o));const r=_l(Gt.value);ut({fingerprint:o,eventType:"survey-load-time",mediumId:v.id,medium:"survey",locationId:e.formSurvey.locationId,name:e.formSurvey.name,timeSpent:r.loadTime,startTimestamp:r.startTimestamp,endTimestamp:r.endTimestamp,totalBlockingTime:r.totalBlockingTime,firstContentfulPaint:r.firstContentfulPaint,timeToInteractive:r.timeToInteractive,networkType:r.networkType,cacheStatus:r.cacheStatus,cdnStatus:r.cdnStatus,pageSizeKB:r.pageSizeKB}).catch(i=>{console.error("survey-load-time API call error:",i)});const a=await ut({fingerprint:o,eventType:"survey-view",mediumId:v.id,medium:"survey",locationId:e.formSurvey.locationId,name:e.formSurvey.name}),l=So(a,i=>{o!==i.fingerprint&&(o=i.fingerprint),l()})}setTimeout(()=>{Kt.value=!0,pr(e.formFieldsValue)},500)}),bl({__dangerouslyDisableSanitizers:["style"],style:[{children:jt.value,type:"text/css"},{children:mt.value,type:"text/css"},{children:Po.value,type:"text/css"},{children:Ko.value,type:"text/css"},{children:Yt.value,type:"text/css"}],meta:[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"viewport",content:"minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no"}]});const Oe=o=>{for(const r of S.value)if(r.slideData&&Array.isArray(r.slideData)){for(const a of r.slideData)if(a.hiddenFieldQueryKey===o&&(a.Id||a.id))return a.Id||a.id}return null},Di=()=>{var i,n,f,F;if(S.value.forEach(p=>{p.slideData&&Array.isArray(p.slideData)&&p.slideData.forEach(h=>{h._originalRequired=h.required})}),!((F=(f=(n=(i=e.formSurvey)==null?void 0:i.formData)==null?void 0:n.form)==null?void 0:f.conditionalLogic)!=null&&F.length)){so.value=Do(S.value);return}setTimeout(()=>{Te(e.formFieldsValue,!0)},100);const r=e.formSurvey.formData.form.conditionalLogic.filter(p=>{var h,I;return((h=p==null?void 0:p.outcome)==null?void 0:h.type)==="showHideFields"||((I=p==null?void 0:p.outcome)==null?void 0:I.type)==="jumpTo"});if(!(r!=null&&r.length)){so.value=Do(S.value);return}let a=[],l=[];r.forEach(p=>{var h;if(((h=p.outcome)==null?void 0:h.type)==="showHideFields"){const{hideType:I,value:N}=p.outcome;if(!N)return;const z=Array.isArray(N)?N:[N];I.includes("Show")?(a=[...new Set([...a,...z])],l=l.filter(W=>!z.includes(W))):I.includes("Hide")&&(l=[...new Set([...l,...z])],a=a.filter(W=>!z.includes(W)))}}),(a.length||l.length)&&S.value.forEach(p=>{p.slideData&&Array.isArray(p.slideData)&&p.slideData.forEach(h=>{h._originalRequired=h.required,a.includes(h.hiddenFieldQueryKey)?(h.hidden=!0,h.required=!1,h.hiddenFieldValue=""):l.includes(h.hiddenFieldQueryKey)&&(h.hidden=!1,h.hiddenFieldValue="")})}),so.value=Do(S.value)},Ct=(o,r=0)=>{if(r>3)return;let a=new Map,l=new Map;S.value.forEach(n=>{n.slideData&&n.slideData.forEach(f=>{f.hiddenFieldQueryKey&&a.set(f.hiddenFieldQueryKey,!!f.hidden)})}),Te(o,!0);let i=!1;S.value.forEach(n=>{n.slideData&&n.slideData.forEach(f=>{f.hiddenFieldQueryKey&&(l.set(f.hiddenFieldQueryKey,!!f.hidden),a.get(f.hiddenFieldQueryKey)!==l.get(f.hiddenFieldQueryKey)&&(i=!0))})}),i&&r<3&&setTimeout(()=>{Ct(o,r+1)},0)},Ii=()=>{var o,r,a,l,i,n,f,F,p,h,I,N;return ce.value&&((n=(i=(l=(a=(r=(o=e.formSurvey)==null?void 0:o.formData)==null?void 0:r.form)==null?void 0:a.formAction)==null?void 0:l.mobileHeaderImageSrc)==null?void 0:i.trim)!=null&&n.call(i))?e.formSurvey.formData.form.formAction.mobileHeaderImageSrc:((N=(I=(h=(p=(F=(f=e.formSurvey)==null?void 0:f.formData)==null?void 0:F.form)==null?void 0:p.formAction)==null?void 0:h.headerImageSrc)==null?void 0:I.trim)==null?void 0:N.call(I))||""};il(()=>{go.value=Ii()}),go.value=((Vr=(st=(Ar=(Ir=(Dr=(Fr=e.formSurvey)==null?void 0:Fr.formData)==null?void 0:Dr.form)==null?void 0:Ir.formAction)==null?void 0:Ar.headerImageSrc)==null?void 0:st.trim)==null?void 0:Vr.call(st))||"";const Sr=o=>{const r=S.value[o];return!(r!=null&&r.slideData)||!Array.isArray(r.slideData)?!1:r.slideData.some(a=>!a.hidden)},xt=async(o,r)=>{try{if(Ve.query.notrack)return;if(!Zt.value){Zt.value=!0;let a=(r==null?void 0:r.id)||(r==null?void 0:r.tag)||(r==null?void 0:r.label),l=r==null?void 0:r.type;if((r==null?void 0:r.tag)==="group_address"&&(o!=null&&o.target)){const f=o.target.name||o.target.getAttribute("data-field-name");f&&(a=f,l="address_field")}const i=_l(Gt.value),n=ft(e.formSurvey.locationId)||nl();ut({fingerprint:n,eventType:"survey-start-conversion",mediumId:v.id,medium:"survey",locationId:e.formSurvey.locationId,name:e.formSurvey.name,fieldId:a,firstFocusAt:Date.now(),focusedFieldId:a,focusedFieldType:l,focusedLoadDuration:i.loadTime}).catch(f=>{console.error("survey handleFieldFocus API call error:",f)})}}catch(a){console.error("handleFieldFocus error:",a)}};return(o,r)=>{var Q;const a=Mi,l=Fn,i=Dn,n=In,f=An,F=Vn,p=kn,h=En,I=Tn,N=Pn,z=Ji,W=Cn,oe=xn,re=wn,J=On,G=Ln,c=qn,u=Bn,L=Rn,U=Nn,B=Un,D=Mn,ee=zn,ve=Jn,Pe=$n,qe=jn,$e=Hn,to=Qn,fo=Kn,co=Wn;return x(),Ie("div",{ref:C=>{ho.value=C},class:"hl-app"},[Ce("div",Yn,[dt(a,{type:"text/css",children:t(dr)},null,8,["children"]),Ce("section",Gn,[Ce("section",Zn,[Ce("div",Xn,[dt(Qi,{loading:!t(ze),color:"#188bf6",size:"30px"},null,8,["loading"])]),Ce("section",{ref:C=>{et.value=C},id:"hl_form_builder_main"+t(Ue),class:yo(["hl_form-builder--main",t(le)?"hl_form-builder--main--custom-margin":""]),style:ro(t(Nl))},[t(ce)&&((Q=t(oo))!=null&&Q.enableProgressBar)&&t(pe)>1&&t(lo)<100?(x(),Ie("div",{key:0,class:"survey-progress-bar-mobile survey-progress-bar-header",style:ro(li())},[Ce("div",{class:"survey-progress-fill-mobile",style:ro(ii())},null,4)],4)):be("",!0),t(go).trim().length>0?(x(),Ie("div",os,[Ce("div",{class:yo([()=>{t(Go)},"ghl-banner"]),style:ro({maxWidth:t(Go)?"100%":t(Fe)+"px"})},[dt(l,{url:t(go),onLoad:Yl,width:t(Go)?"100%":t(Fe),alt:"banner"},null,8,["url","width"])],6)])):be("",!0),Ce("div",{style:ro({maxWidth:t(Fe)+"px",...t(Si)}),class:"ghl-form-wrap",ref:C=>{io.value=C}},[t(De)?be("",!0):(x(),Ie("form",{key:0,id:"_builder-form",style:ro(ai()),onSubmit:r[2]||(r[2]=Ci(C=>Uo(!0),["prevent"])),name:"builder-form",class:"ghl-survey-form"},[!t(De)&&t(xe)?(x(),Ie("div",{key:0,class:yo([()=>t(ce)||t(Fe)<=600?"ghl-ques-wrap-less":"ghl-ques-wrap-big","ghl-question-set"]),style:{"margin-top":"2px"}},[(x(!0),Ie(sl,null,ul(t(S),(C,Z)=>(x(),Ie("div",{key:Z,ref_for:!0,ref:g=>{t(To)[Z]=g},class:yo([[Z==0?"ghl-page-current":"",`slide-no-${Z+1}`],"form-builder--wrap-questions ghl-question"])},[Ce("div",{class:yo(["row fields-container",t(Fi)?"remove-extra-padding":""])},[(x(!0),Ie(sl,null,ul(oi(C.slideData),(g,w)=>{var de,ge,_,y,k,ne,V,O,T,E,P,d,R,Y,b,M,K,mo,vo,je,kr,Er,Tr,Pr,Cr,xr,wr,Or,Lr,qr,Br,Rr,Nr,Ur,Mr,zr,Jr,$r,jr,Hr,Qr,Kr,Wr,Yr,Gr,Zr,Xr,ea,oa,ta,ra,aa,la,ia,na,sa,ua,da,fa,ca,ma,va,ya,pa,ga,ha,_a,ba,Sa,Fa,Da,Ia,Aa,Va,ka,Ea,Ta,Pa,Ca,xa,wa,Oa,La,qa,Ba,Ra,Na,Ua,Ma,za,Ja,$a,ja,Ha,Qa,Ka,Wa,Ya,Ga,Za,Xa,el,ol,tl,rl,al,ll;return x(),Ie("div",{key:w,id:"el_"+v.id+"_"+g.tag+"_"+w,class:"col-12 form-field-wrapper",style:ro(Xl(g)),onClick:A=>xt(A,g),onFocus:A=>xt(A,g),onFocusin:A=>xt(A,g)},[Ce("div",{class:yo([w%2==0?"f-even":"f-odd","form-field-container"])},[g.type==="text"?(x(),$(i,{key:0,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(y=(_=(ge=(de=t(e).formSurvey)==null?void 0:de.formData)==null?void 0:ge.form)==null?void 0:_.fieldStyle)==null?void 0:y.labelAlignment,"phone-country-included":t(e).phoneCountryIncluded,"phone-country-code":t(e).phoneCountryCode,"formatted-phone":t(e).formattedPhone,"location-country":t(Et),"form-fields-value":t(e).formFieldsValue,"phone-country-derived":t(Wo),locationId:(k=v==null?void 0:v.surveyData)==null?void 0:k.locationId,"medium-id":t(he),onVerifyPhone:sr,onUpdatePhoneCountryDerived:ir,onUpdateToken:Dt,onCustomFieldPhoneNumberUpdate:No,onIsSlideMovable:we,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","phone-country-included","phone-country-code","formatted-phone","location-country","form-fields-value","phone-country-derived","locationId","medium-id","onUpdatePhoneCountryDerived","onCustomFieldPhoneNumberUpdate","errors"])):be("",!0),g.type==="phone"?(x(),$(n,{key:1,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(T=(O=(V=(ne=t(e).formSurvey)==null?void 0:ne.formData)==null?void 0:V.form)==null?void 0:O.fieldStyle)==null?void 0:T.labelAlignment,"phone-country-included":t(e).phoneCountryIncluded,"phone-country-code":t(e).phoneCountryCode,"location-country":t(Et),"form-fields-value":t(e).formFieldsValue,"formatted-phone":t(e).formattedPhone,"phone-country-derived":t(Wo),locationId:(E=v==null?void 0:v.surveyData)==null?void 0:E.locationId,"medium-id":t(he),onVerifyPhone:sr,onUpdatePhoneCountryDerived:ir,onUpdateToken:Dt,onCustomFieldPhoneNumberUpdate:No,onIsSlideMovable:we,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","phone-country-included","phone-country-code","location-country","form-fields-value","formatted-phone","phone-country-derived","locationId","medium-id","onUpdatePhoneCountryDerived","onCustomFieldPhoneNumberUpdate","errors"])):g.type==="number"||g.type==="numerical"||g.dataType==="SCORE"?(x(),$(f,{key:2,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(Y=(R=(d=(P=t(e).formSurvey)==null?void 0:P.formData)==null?void 0:d.form)==null?void 0:R.fieldStyle)==null?void 0:Y.labelAlignment,"form-fields-value":t(e).formFieldsValue,onIsSlideMovable:we,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","errors"])):g.type==="email"?(x(),$(F,{key:3,kind:"survey","medium-id":t(he),item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(mo=(K=(M=(b=t(e).formSurvey)==null?void 0:b.formData)==null?void 0:M.form)==null?void 0:K.fieldStyle)==null?void 0:mo.labelAlignment,"form-fields-value":t(e).formFieldsValue,onIsSlideMovable:we,onVerifyEmail:Wl,onUpdateToken:Dt,onAddOrUpdateError:ue,locationId:(vo=v==null?void 0:v.surveyData)==null?void 0:vo.locationId,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["medium-id","item","form-label-visible","form-label-alignment","form-fields-value","locationId","errors"])):g.type==="h1"?(x(),$(p,{key:4,item:t(te)(g),ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item"])):g.type==="textbox_list"?(x(),$(h,{key:5,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(Tr=(Er=(kr=(je=t(e).formSurvey)==null?void 0:je.formData)==null?void 0:kr.form)==null?void 0:Er.fieldStyle)==null?void 0:Tr.labelAlignment,"form-fields-value":t(e).formFieldsValue,"local-tag-id":t(Ue),errors:t(e).errors,onAddOrUpdateError:ue,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","local-tag-id","errors"])):g.type==="textarea"||g.type=="large_text"?(x(),$(I,{key:6,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(wr=(xr=(Cr=(Pr=t(e).formSurvey)==null?void 0:Pr.formData)==null?void 0:Cr.form)==null?void 0:xr.fieldStyle)==null?void 0:wr.labelAlignment,"form-fields-value":t(e).formFieldsValue,errors:t(e).errors,onAddOrUpdateError:ue,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","errors"])):g.type==="img"&&"url"in g?(x(),$(N,{key:7,kind:"survey",item:t(te)(g),ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item"])):g.type==="html"&&t(ze)&&t(Kt)?(x(),$(z,{key:8,item:t(te)(g),localTagId:t(Ue)+Z+w,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","localTagId"])):g.type==="captcha"?(x(),$(W,{key:9,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(Br=(qr=(Lr=(Or=t(e).formSurvey)==null?void 0:Or.formData)==null?void 0:Lr.form)==null?void 0:qr.fieldStyle)==null?void 0:Br.labelAlignment,"captcha-input-value":t(ql),"local-tag-id":t(Ue),"validation-error":t(e).validationError,errors:t(e).errors,onAddOrUpdateError:ue,onUpdateIsCaptchaVerified:Ql,onUpdateCaptchaToken:Kl,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","captcha-input-value","local-tag-id","validation-error","errors"])):g.type==="monetory"?(x(),$(oe,{key:10,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(Mr=(Ur=(Nr=(Rr=t(e).formSurvey)==null?void 0:Rr.formData)==null?void 0:Nr.form)==null?void 0:Ur.fieldStyle)==null?void 0:Mr.labelAlignment,"form-fields-value":t(e).formFieldsValue,"locale-currency":t(_i),primaryColor:(Hr=(jr=($r=(Jr=(zr=t(e))==null?void 0:zr.formSurvey)==null?void 0:Jr.formData)==null?void 0:$r.form)==null?void 0:jr.fieldStyle)==null?void 0:Hr.primaryColor,onUpdateFormFieldsValue:Ro,onIsSlideMovable:we,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","locale-currency","primaryColor","errors"])):g.type==="rating"?(x(),$(re,{key:11,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(Yr=(Wr=(Kr=(Qr=t(e).formSurvey)==null?void 0:Qr.formData)==null?void 0:Kr.form)==null?void 0:Wr.fieldStyle)==null?void 0:Yr.labelAlignment,"form-fields-value":t(e).formFieldsValue,"layout-type":t(e).formSurvey.layout,"font-size":(Xr=(Zr=(Gr=t(e))==null?void 0:Gr.formSurvey)==null?void 0:Zr.fieldStyle)==null?void 0:Xr.placeholderFontSize,errors:t(e).errors,onAddOrUpdateError:ue,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","layout-type","font-size","errors"])):g.type==="checkbox"?(x(),$(J,{key:12,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(ra=(ta=(oa=(ea=t(e).formSurvey)==null?void 0:ea.formData)==null?void 0:oa.form)==null?void 0:ta.fieldStyle)==null?void 0:ra.labelAlignment,"form-fields-value":t(e).formFieldsValue,"local-tag-id":t(Ue),onHandleCheckBox:ni,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","local-tag-id","errors"])):g.type==="terms_and_conditions"?(x(),$(G,{key:13,kind:"form",item:t(te)(g),labelFontFamily:t(e).fieldStyle.labelFontFamily,"form-label-visible":t(ae),"form-fields-value":t(e).formFieldsValue,"local-tag-id":t(Ue),onUpdateFormFieldsValue:Ro,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[Z]=A}},null,8,["item","labelFontFamily","form-label-visible","form-fields-value","local-tag-id","errors"])):g.type==="radio"&&g.picklistOptions?(x(),$(c,{key:14,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(na=(ia=(la=(aa=t(e).formSurvey)==null?void 0:aa.formData)==null?void 0:la.form)==null?void 0:ia.fieldStyle)==null?void 0:na.labelAlignment,"form-fields-value":t(e).formFieldsValue,"local-tag-id":t(Ue),onIsSlideMovable:we,onHandleFieldLogicChange:Mo,onResetFieldsValue:mi,onSetRadioValue:fi,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","local-tag-id","errors"])):g.type==="radio"&&g.picklistOptionsImage?(x(),$(u,{key:15,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(fa=(da=(ua=(sa=t(e).formSurvey)==null?void 0:sa.formData)==null?void 0:ua.form)==null?void 0:da.fieldStyle)==null?void 0:fa.labelAlignment,"form-fields-value":t(e).formFieldsValue,"local-tag-id":t(Ue),onIsSlideMovable:we,onHandleFieldLogicChange:Mo,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","local-tag-id","errors"])):g.type==="select"&&g.tag=="country"?(x(),$(L,{key:16,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(ya=(va=(ma=(ca=t(e).formSurvey)==null?void 0:ca.formData)==null?void 0:ma.form)==null?void 0:va.fieldStyle)==null?void 0:ya.labelAlignment,"formatted-country":t(se),countries:t(hr),onUpdateFormattedCountry:nr,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","formatted-country","countries","errors"])):g.type==="single_options"||g.type==="multiple_options"?(x(),$(U,{key:17,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(_a=(ha=(ga=(pa=t(e).formSurvey)==null?void 0:pa.formData)==null?void 0:ga.form)==null?void 0:ha.fieldStyle)==null?void 0:_a.labelAlignment,"form-fields-value":t(e).formFieldsValue,onHandleFieldLogicChange:Mo,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","errors"])):g.type==="date"?(x(),$(B,{key:18,kind:"survey",item:t(te)(g),"form-label-visible":t(ae),"form-label-alignment":(Da=(Fa=(Sa=(ba=t(e).formSurvey)==null?void 0:ba.formData)==null?void 0:Sa.form)==null?void 0:Fa.fieldStyle)==null?void 0:Da.labelAlignment,"form-fields-value":t(e).formFieldsValue,onDateSelected:vi,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-visible","form-label-alignment","form-fields-value","errors"])):g.type==="file_upload"?(x(),$(D,{key:19,kind:"survey",item:t(te)(g),"form-label-alignment":(ka=(Va=(Aa=(Ia=t(e).formSurvey)==null?void 0:Ia.formData)==null?void 0:Aa.form)==null?void 0:Va.fieldStyle)==null?void 0:ka.labelAlignment,"form-fields-value":t(e).formFieldsValue,"form-label-visible":t(ae),onUpdateFormFieldsValue:Ro,onAddOrUpdateError:ue,errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A}},null,8,["item","form-label-alignment","form-fields-value","form-label-visible","errors"])):g.type==="signature"?(x(),$(ee,{key:20,kind:"survey",item:t(te)(g),"form-label-alignment":(Ca=(Pa=(Ta=(Ea=t(e).formSurvey)==null?void 0:Ea.formData)==null?void 0:Ta.form)==null?void 0:Pa.fieldStyle)==null?void 0:Ca.labelAlignment,"form-fields-value":t(e).formFieldsValue,"form-label-visible":t(ae),errors:t(e).errors,onAddOrUpdateError:ue,ref_for:!0,ref:A=>{t(X)[w]=A},onUpdateFormFieldsValue:Ro},null,8,["item","form-label-alignment","form-fields-value","form-label-visible","errors"])):g.tag==="group_address"?(x(),$(ve,{key:21,kind:"survey",item:t(te)(g),"form-fields-value":t(e).formFieldsValue,"form-label-visible":t(ae),"form-label-alignment":(La=(Oa=(wa=(xa=t(e).formSurvey)==null?void 0:xa.formData)==null?void 0:wa.form)==null?void 0:Oa.fieldStyle)==null?void 0:La.labelAlignment,"formatted-country":t(se),countries:t(hr),errors:t(e).errors,ref_for:!0,ref:A=>{t(X)[w]=A},onUpdateFormFieldsValue:Ro,onAddOrUpdateError:ue,onUpdateFormattedCountry:nr,addressData:t(Me),onIsSlideMovable:we,fieldSpacing:(Ua=(Na=(Ra=(Ba=(qa=t(e))==null?void 0:qa.formSurvey)==null?void 0:Ba.formData)==null?void 0:Ra.form)==null?void 0:Na.style)==null?void 0:Ua.fieldSpacing,fieldStyle:t(e).fieldStyle,locationId:(Ma=v==null?void 0:v.surveyData)==null?void 0:Ma.locationId,companyId:(za=v==null?void 0:v.surveyData)==null?void 0:za.companyId,fields:C.slideData,id:v.id,source:"surveys"},null,8,["item","form-fields-value","form-label-visible","form-label-alignment","formatted-country","countries","errors","addressData","fieldSpacing","fieldStyle","locationId","companyId","fields","id"])):t(zo)&&g.type==="payment"&&(((Ha=(ja=($a=(Ja=t(e).formSurvey)==null?void 0:Ja.formData)==null?void 0:$a.form)==null?void 0:ja.payment)==null?void 0:Ha.paymentType)==="product"&&t(tr)&&t(rt).length>0||((Ya=(Wa=(Ka=(Qa=t(e).formSurvey)==null?void 0:Qa.formData)==null?void 0:Ka.form)==null?void 0:Wa.payment)==null?void 0:Ya.paymentType)!=="product")?(x(),$(Pe,{key:22,kind:"survey",item:t(te)(g),payment:(Za=(Ga=t(e).formSurvey)==null?void 0:Ga.formData)==null?void 0:Za.form.payment,products:t(rt),"bump-products":t(rr),style:ro((el=(Xa=t(e).formSurvey)==null?void 0:Xa.formData)==null?void 0:el.form.fieldStyle),"form-label-visible":t(ae),"form-label-alignment":(al=(rl=(tl=(ol=t(e).formSurvey)==null?void 0:ol.formData)==null?void 0:tl.form)==null?void 0:rl.fieldStyle)==null?void 0:al.labelAlignment,locationId:t(_e),"form-id":t(he),recurringDonationProduct:t(ar),isPaymentInProcessing:t(me),"form-name":(ll=t(e).formSurvey)==null?void 0:ll.name,errors:t(e).errors,formItems:t(e).form,formValues:t(e).formFieldsValue,"phone-country-code":t(e).phoneCountryCode,"location-country":t(Et),isPaymentCollectedSuccesfully:t(St),onOnPaymentCallback:jl,onPaymentAmount:$l,onProductOrder:hi,onOnOrderApiFail:r[0]||(r[0]=()=>me.value=!1),onProductSelected:pi,onCouponCode:gi,ref_for:!0,ref:A=>{t(X)[w]=A,_t.value=A}},null,8,["item","payment","products","bump-products","style","form-label-visible","form-label-alignment","locationId","form-id","recurringDonationProduct","isPaymentInProcessing","form-name","errors","formItems","formValues","phone-country-code","location-country","isPaymentCollectedSuccesfully"])):be("",!0),!t(gt)&&t(S)[Z].slideData.length>1&&g.type!=="html"&&g.type!=="img"&&g.type!=="h1"&&g.type!=="source"?(x(),Ie("div",rs)):be("",!0)],2)],44,ts)}),128))],2)],2))),128))],2)):be("",!0),t(Ft)?(x(),Ie("section",as,[dt(qe,{onExpired:r[1]||(r[1]=()=>qo.value=""),onVerify:Jl}),t(at)?(x(),Ie("p",ls,dl(t(at)),1)):be("",!0),Ce("div",is,dl(t(xi).CAPTCHA_RETRY),1)])):be("",!0),t(bi)?(x(),$($e,{key:2,style:{padding:"30px 0px"},company:t(e).company},null,8,["company"])):be("",!0),t(Jo)?be("",!0):(x(),$(to,{key:3,footerStyle:t(br),isNewFooter:t(ko),isStickyFooter:t(Jo),isFunnelPreview:v.funnelPreview,source:s.source,isFormQualified:t(xe),formSubmitDisable:t(me),isNextEnable:t(Le),isFormPosted:t(De),isButtonsDisabled:t(Zo),isBackButtonEnable:t(Ne),isBackButtonEnabledControl:t(Pt),isProgressBarEnabled:t(_r),progressPercent:t(lo),currentSlide:t(q),totalSlides:t(pe),isMobile:t(ce),onCheckForNextSlide:kt,onMoveToPrev:yr},null,8,["footerStyle","isNewFooter","isStickyFooter","isFunnelPreview","source","isFormQualified","formSubmitDisable","isNextEnable","isFormPosted","isButtonsDisabled","isBackButtonEnable","isBackButtonEnabledControl","isProgressBarEnabled","progressPercent","currentSlide","totalSlides","isMobile"]))],36)),t(Jo)&&!t(De)?(x(),$(to,{key:1,footerStyle:t(br),isNewFooter:t(ko),isStickyFooter:t(Jo),isFunnelPreview:v.funnelPreview,source:s.source,isFormQualified:t(xe),formSubmitDisable:t(me),isNextEnable:t(Le),isFormPosted:t(De),isButtonsDisabled:t(Zo),isBackButtonEnable:t(Ne),isBackButtonEnabledControl:t(Pt),isProgressBarEnabled:t(_r),progressPercent:t(lo),currentSlide:t(q),totalSlides:t(pe),isMobile:t(ce),onCheckForNextSlide:kt,onMoveToPrev:yr},null,8,["footerStyle","isNewFooter","isStickyFooter","isFunnelPreview","source","isFormQualified","formSubmitDisable","isNextEnable","isFormPosted","isButtonsDisabled","isBackButtonEnable","isBackButtonEnabledControl","isProgressBarEnabled","progressPercent","currentSlide","totalSlides","isMobile"])):be("",!0),t(Re)&&t(Re).action==="order"?(x(),$(fo,{key:2,id:"order-confirmation",payload:t(Re)},null,8,["payload"])):be("",!0),t(De)||!t(xe)?(x(),$(co,{key:3,id:"_builder-form",payload:t(Re)},null,8,["payload"])):be("",!0)],4),"footerHtml"in s.surveyData.formData.form.formAction&&s.surveyData.formData.form.formAction.footerHtml.trim().length>0?(x(),Ie("div",{key:2,class:yo(`ghl-footer-wrap ${!t(ze)&&"hidden"}`)},[Ce("div",{innerHTML:t(wi)(s.surveyData.formData.form.formAction.footerHtml)},null,8,ns)],2)):be("",!0)],14,es)])])],512)],512)}}}),As=Ui(ss,[["__scopeId","data-v-b6261940"]]);export{As as S};
