import{d,I as l,r as w,o as h,a as m,b as f}from"./8xvvzpeQ.js";const C=d({__name:"Recaptcha",emits:["verify","expired"],setup(u,{emit:n}){const o=l().public.RECAPTCHA_SITE_KEY,t=w(null),r=n,i=e=>{r("verify",e)},s=e=>{r("expired",e)},p=()=>new Promise(e=>{if(window.grecaptchaV2)e(window.grecaptchaV2);else{const a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?render=explicit",a.async=!0,a.onload=()=>{window.grecaptchaV2=window.grecaptcha,e(window.grecaptchaV2)},a.onerror=()=>{console.error("Failed to load reCAPTCHA script")},document.head.appendChild(a)}}),c=(e=3)=>{window.grecaptchaV2&&t.value&&window.grecaptchaV2.render?window.grecaptchaV2.ready(()=>{window.grecaptchaV2.render(t.value,{sitekey:o,callback:i,"expired-callback":s})}):e>0?(console.warn(`reCAPTCHA not ready. Retrying in 500ms... (Attempts left: ${e})`),setTimeout(()=>c(e-1),500)):console.error("reCAPTCHA library failed to load after multiple attempts.")};return h(()=>{window.grecaptchaV2?c():p().then(()=>{c()})}),(e,a)=>(m(),f("div",{ref_key:"recaptchaContainer",ref:t},null,512))}});export{C as default};
